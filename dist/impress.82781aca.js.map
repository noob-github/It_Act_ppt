{"version":3,"sources":["impress.js"],"names":["document","window","lib","pfx","style","createElement","prefixes","split","memory","prop","ucProp","charAt","toUpperCase","substr","props","join","i","undefined","validateOrder","order","fallback","validChars","returnStr","indexOf","css","el","key","pkey","hasOwnProperty","translate","t","x","y","z","rotate","r","revert","axes","reverse","length","scale","s","computeWindowScale","config","hScale","innerHeight","height","wScale","innerWidth","width","maxScale","minScale","body","impressSupported","classList","dataset","className","roots","preInitPlugins","preStepLeavePlugins","defaults","perspective","transitionDuration","empty","impress","rootId","init","goto","prev","next","swipe","tear","initLibraries","remove","add","stepsData","activeStep","currentState","steps","windowScale","root","util","byId","canvas","initialized","lastEntered","onStepEnter","step","triggerEvent","onStepLeave","currentStep","nextStep","initStep","idx","data","toNumber","rotateX","rotateY","rotateZ","rotateOrder","id","position","transform","transformStyle","initAllSteps","$$","forEach","execPreInitPlugins","meta","$","content","parentNode","head","name","appendChild","rootData","arrayify","childNodes","documentElement","overflow","rootStyles","transformOrigin","transition","top","left","api","getStep","stepEnterTimeout","duration","reason","origEvent","scrollTo","event","target","detail","execPreStepLeavePlugins","zoomin","delay","targetScale","transitionDelay","clearTimeout","setTimeout","interpolate","a","b","k","pct","Math","abs","nextElement","nextScale","interpolatedStep","gc","teardown","addEventListener","lastHash","location","hash","getElementFromHash","supported","libraryFactories","addLibraryFactory","obj","libname","addPreInitPlugin","plugin","weight","parseInt","push","thisLevel","j","addPreStepLeavePlugin","rootsCount","startingState","libraryFactory","elementList","eventListenerList","callbackList","recordStartingState","pushElement","element","parent","pushEventListener","type","listenerFunction","listener","pushCallback","callback","resetStartingState","parentElement","removeChild","removeEventListener","getElementById","querySelectorAll","getAttribute","contains","impressNotSupported","metas","m","activeId","querySelector","pop","removeAttribute","setAttribute","firstChild","canvasHTML","innerHTML","selector","context","slice","call","replace","getUrlParamValue","parameter","chunk","search","value","throttle","fn","timer","args","arguments","apply","numeric","isNaN","Number","eventName","createEvent","initCustomEvent","dispatchEvent","autoplayDefault","currentStepTimeout","timeoutHandle","autoplay","toolbar","addToolbarButton","status","reloadTimeout","setAutoplayTimeout","timeout","setButtonText","toolbarButton","makeDomElement","html","tempDiv","toggleStatus","getButtonText","buttonWidth","offsetWidth","buttonHeight","offsetHeight","group","blackedOut","removeBlackout","display","blackout","firstElementChild","keyCode","preventDefault","preInit","markdown","markdownDivs","dialect","markdownDialect","slides","textContent","toHTML","newElement","cloneNode","insertBefore","hljs","initHighlightingOnLoad","mermaid","initialize","startOnLoad","selectors","elements","e","stopPropagation","activeElement","blur","enterFullscreen","elem","fullscreenElement","requestFullscreen","exitFullscreen","code","command","text","row","isNumber","gotoKeyList","gotoNextList","keylist","nextlist","console","log","index","newTarget","gotoNext","gotoPrev","rows","renderHelpDiv","helpDiv","arrayItem","toggleHelp","rowIndex","isArray","lang","navigator","language","preViewDefaultFactor","preViewMinimumFactor","preViewGap","consoleTemplate","cssFileOldDefault","cssFile","cssFileIframeOldDefault","cssFileIframe","allConsoles","zeroPad","impressConsole","consoleWindow","classes","nextElementSibling","attributes","restart","newNotes","noNotes","baseURL","URL","substring","slideSrc","preSrc","slideView","src","preView","moving","notes","scrollTop","ready","onSubstep","onSubstepShow","onSubstepHide","triggerEventInView","frame","contentDocument","spaceHandler","scrollTopMax","clientHeight","timerReset","timerStart","Date","clockTick","now","hours","getHours","minutes","getMinutes","seconds","getSeconds","ampm","useAMPM","clockStr","nodeValue","floor","contentWindow","registerKeyEvent","keyCodes","handler","ctrlKey","altKey","shiftKey","metaKey","consoleOnLoad","insertAdjacentHTML","open","isconsoleWindow","closed","focus","message","right","bottom","backgroundColor","clickStr","styleStr","clickToOpen","cssLink","write","cssStyleStr","title","onload","clockInterval","setInterval","onbeforeunload","clearInterval","close","onresize","resize","ratio","views","delta","clientWidth","slideViewWidth","slideViewHeight","preViewTop","preViewWidth","preViewHeight","_init","cssConsole","cssIframe","consoleCss","consoleCssIframe","onunload","consoleAutolaunch","attributeTracker","enhanceMediaNodes","enhanceMedia","removeMediaClasses","onStepenterDetectImpressConsole","onStepenter","onStepleave","onPlay","onPause","onEnded","getMediaAttribute","node","attr","attributeName","nodes","attrName","attrValue","hasAttribute","nodeName","toLowerCase","types","media","mediaElement","stepElement","getElementsByClassName","frameElement","onConsole","preview","muted","play","autopause","autostop","pause","currentTime","getNextStep","getPrevStep","test","userAgent","oldprev","oldnext","hide","show","isNavigationEvent","tagName","href","stopImmediatePropagation","err","TypeError","hideSteps","select","selectOptionsHtml","options","addNavigationControls","prevHtml","selectHtml","nextHtml","stepids","getSteps","progressbar","progress","updateProgressbar","slideId","slideNumber","toFixed","toNumberAdvanced","match","parseFloat","multiplier","computeRelativePositions","relative","relTo","ref","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","error","warn","relX","relY","relZ","rel","skip","stop","substep","showSubstepIfAny","hideSubstepIfAny","substeps","sorted","sortSubsteps","visible","showSubstep","substepNodeList","Array","from","filter","substepOrder","sort","orderA","orderB","concat","hideSubstep","current","startX","lastX","lastDX","threshold","touches","clientX","diff","totalDiff","groups","getGroupElement","nextIndex","getNextGroupIndex","before"],"mappings":"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","file":"impress.82781aca.js","sourceRoot":"..","sourcesContent":["// This file was automatically generated from files in src/ directory.\n\n/*! Licensed under MIT License - http://github.com/impress/impress.js */\n/**\n * impress.js\n *\n * impress.js is a presentation tool based on the power of CSS3 transforms and transitions\n * in modern browsers and inspired by the idea behind prezi.com.\n *\n *\n * Copyright 2011-2012 Bartek Szopka (@bartaz), 2016-2020 Henrik Ingo (@henrikingo)\n *\n * Released under the MIT License.\n *\n * ------------------------------------------------\n *  author:  Bartek Szopka, Henrik Ingo\n *  version: 1.1.0\n *  url:     http://impress.js.org\n *  source:  http://github.com/impress/impress.js/\n */\n\n// You are one of those who like to know how things work inside?\n// Let me show you the cogs that make impress.js run...\n( function( document, window ) {\n    \"use strict\";\n    var lib;\n\n    // HELPER FUNCTIONS\n\n    // `pfx` is a function that takes a standard CSS property name as a parameter\n    // and returns it's prefixed version valid for current browser it runs in.\n    // The code is heavily inspired by Modernizr http://www.modernizr.com/\n    var pfx = ( function() {\n\n        var style = document.createElement( \"dummy\" ).style,\n            prefixes = \"Webkit Moz O ms Khtml\".split( \" \" ),\n            memory = {};\n\n        return function( prop ) {\n            if ( typeof memory[ prop ] === \"undefined\" ) {\n\n                var ucProp  = prop.charAt( 0 ).toUpperCase() + prop.substr( 1 ),\n                    props   = ( prop + \" \" + prefixes.join( ucProp + \" \" ) + ucProp ).split( \" \" );\n\n                memory[ prop ] = null;\n                for ( var i in props ) {\n                    if ( style[ props[ i ] ] !== undefined ) {\n                        memory[ prop ] = props[ i ];\n                        break;\n                    }\n                }\n\n            }\n\n            return memory[ prop ];\n        };\n\n    } )();\n\n    var validateOrder = function( order, fallback ) {\n        var validChars = \"xyz\";\n        var returnStr = \"\";\n        if ( typeof order === \"string\" ) {\n            for ( var i in order.split( \"\" ) ) {\n                if ( validChars.indexOf( order[ i ] ) >= 0 ) {\n                    returnStr += order[ i ];\n\n                    // Each of x,y,z can be used only once.\n                    validChars = validChars.split( order[ i ] ).join( \"\" );\n                }\n            }\n        }\n        if ( returnStr ) {\n            return returnStr;\n        } else if ( fallback !== undefined ) {\n            return fallback;\n        } else {\n            return \"xyz\";\n        }\n    };\n\n    // `css` function applies the styles given in `props` object to the element\n    // given as `el`. It runs all property names through `pfx` function to make\n    // sure proper prefixed version of the property is used.\n    var css = function( el, props ) {\n        var key, pkey;\n        for ( key in props ) {\n            if ( props.hasOwnProperty( key ) ) {\n                pkey = pfx( key );\n                if ( pkey !== null ) {\n                    el.style[ pkey ] = props[ key ];\n                }\n            }\n        }\n        return el;\n    };\n\n    // `translate` builds a translate transform string for given data.\n    var translate = function( t ) {\n        return \" translate3d(\" + t.x + \"px,\" + t.y + \"px,\" + t.z + \"px) \";\n    };\n\n    // `rotate` builds a rotate transform string for given data.\n    // By default the rotations are in X Y Z order that can be reverted by passing `true`\n    // as second parameter.\n    var rotate = function( r, revert ) {\n        var order = r.order ? r.order : \"xyz\";\n        var css = \"\";\n        var axes = order.split( \"\" );\n        if ( revert ) {\n            axes = axes.reverse();\n        }\n\n        for ( var i = 0; i < axes.length; i++ ) {\n            css += \" rotate\" + axes[ i ].toUpperCase() + \"(\" + r[ axes[ i ] ] + \"deg)\";\n        }\n        return css;\n    };\n\n    // `scale` builds a scale transform string for given data.\n    var scale = function( s ) {\n        return \" scale(\" + s + \") \";\n    };\n\n    // `computeWindowScale` counts the scale factor between window size and size\n    // defined for the presentation in the config.\n    var computeWindowScale = function( config ) {\n        var hScale = window.innerHeight / config.height,\n            wScale = window.innerWidth / config.width,\n            scale = hScale > wScale ? wScale : hScale;\n\n        if ( config.maxScale && scale > config.maxScale ) {\n            scale = config.maxScale;\n        }\n\n        if ( config.minScale && scale < config.minScale ) {\n            scale = config.minScale;\n        }\n\n        return scale;\n    };\n\n    // CHECK SUPPORT\n    var body = document.body;\n    var impressSupported =\n\n                          // Browser should support CSS 3D transtorms\n                           ( pfx( \"perspective\" ) !== null ) &&\n\n                          // And `classList` and `dataset` APIs\n                           ( body.classList ) &&\n                           ( body.dataset );\n\n    if ( !impressSupported ) {\n\n        // We can't be sure that `classList` is supported\n        body.className += \" impress-not-supported \";\n    }\n\n    // GLOBALS AND DEFAULTS\n\n    // This is where the root elements of all impress.js instances will be kept.\n    // Yes, this means you can have more than one instance on a page, but I'm not\n    // sure if it makes any sense in practice ;)\n    var roots = {};\n\n    var preInitPlugins = [];\n    var preStepLeavePlugins = [];\n\n    // Some default config values.\n    var defaults = {\n        width: 1024,\n        height: 768,\n        maxScale: 1,\n        minScale: 0,\n\n        perspective: 1000,\n\n        transitionDuration: 1000\n    };\n\n    // It's just an empty function ... and a useless comment.\n    var empty = function() { return false; };\n\n    // IMPRESS.JS API\n\n    // And that's where interesting things will start to happen.\n    // It's the core `impress` function that returns the impress.js API\n    // for a presentation based on the element with given id (\"impress\"\n    // by default).\n    var impress = window.impress = function( rootId ) {\n\n        // If impress.js is not supported by the browser return a dummy API\n        // it may not be a perfect solution but we return early and avoid\n        // running code that may use features not implemented in the browser.\n        if ( !impressSupported ) {\n            return {\n                init: empty,\n                goto: empty,\n                prev: empty,\n                next: empty,\n                swipe: empty,\n                tear: empty,\n                lib: {}\n            };\n        }\n\n        rootId = rootId || \"impress\";\n\n        // If given root is already initialized just return the API\n        if ( roots[ \"impress-root-\" + rootId ] ) {\n            return roots[ \"impress-root-\" + rootId ];\n        }\n\n        // The gc library depends on being initialized before we do any changes to DOM.\n        lib = initLibraries( rootId );\n\n        body.classList.remove( \"impress-not-supported\" );\n        body.classList.add( \"impress-supported\" );\n\n        // Data of all presentation steps\n        var stepsData = {};\n\n        // Element of currently active step\n        var activeStep = null;\n\n        // Current state (position, rotation and scale) of the presentation\n        var currentState = null;\n\n        // Array of step elements\n        var steps = null;\n\n        // Configuration options\n        var config = null;\n\n        // Scale factor of the browser window\n        var windowScale = null;\n\n        // Root presentation elements\n        var root = lib.util.byId( rootId );\n        var canvas = document.createElement( \"div\" );\n\n        var initialized = false;\n\n        // STEP EVENTS\n        //\n        // There are currently two step events triggered by impress.js\n        // `impress:stepenter` is triggered when the step is shown on the\n        // screen (the transition from the previous one is finished) and\n        // `impress:stepleave` is triggered when the step is left (the\n        // transition to next step just starts).\n\n        // Reference to last entered step\n        var lastEntered = null;\n\n        // `onStepEnter` is called whenever the step element is entered\n        // but the event is triggered only if the step is different than\n        // last entered step.\n        // We sometimes call `goto`, and therefore `onStepEnter`, just to redraw a step, such as\n        // after screen resize. In this case - more precisely, in any case - we trigger a\n        // `impress:steprefresh` event.\n        var onStepEnter = function( step ) {\n            if ( lastEntered !== step ) {\n                lib.util.triggerEvent( step, \"impress:stepenter\" );\n                lastEntered = step;\n            }\n            lib.util.triggerEvent( step, \"impress:steprefresh\" );\n        };\n\n        // `onStepLeave` is called whenever the currentStep element is left\n        // but the event is triggered only if the currentStep is the same as\n        // lastEntered step.\n        var onStepLeave = function( currentStep, nextStep ) {\n            if ( lastEntered === currentStep ) {\n                lib.util.triggerEvent( currentStep, \"impress:stepleave\", { next: nextStep } );\n                lastEntered = null;\n            }\n        };\n\n        // `initStep` initializes given step element by reading data from its\n        // data attributes and setting correct styles.\n        var initStep = function( el, idx ) {\n            var data = el.dataset,\n                step = {\n                    translate: {\n                        x: lib.util.toNumber( data.x ),\n                        y: lib.util.toNumber( data.y ),\n                        z: lib.util.toNumber( data.z )\n                    },\n                    rotate: {\n                        x: lib.util.toNumber( data.rotateX ),\n                        y: lib.util.toNumber( data.rotateY ),\n                        z: lib.util.toNumber( data.rotateZ || data.rotate ),\n                        order: validateOrder( data.rotateOrder )\n                    },\n                    scale: lib.util.toNumber( data.scale, 1 ),\n                    transitionDuration: lib.util.toNumber(\n                        data.transitionDuration, config.transitionDuration\n                    ),\n                    el: el\n                };\n\n            if ( !el.id ) {\n                el.id = \"step-\" + ( idx + 1 );\n            }\n\n            stepsData[ \"impress-\" + el.id ] = step;\n\n            css( el, {\n                position: \"absolute\",\n                transform: \"translate(-50%,-50%)\" +\n                           translate( step.translate ) +\n                           rotate( step.rotate ) +\n                           scale( step.scale ),\n                transformStyle: \"preserve-3d\"\n            } );\n        };\n\n        // Initialize all steps.\n        // Read the data-* attributes, store in internal stepsData, and render with CSS.\n        var initAllSteps = function() {\n            steps = lib.util.$$( \".step\", root );\n            steps.forEach( initStep );\n        };\n\n        // `init` API function that initializes (and runs) the presentation.\n        var init = function() {\n            if ( initialized ) { return; }\n            execPreInitPlugins( root );\n\n            // First we set up the viewport for mobile devices.\n            // For some reason iPad goes nuts when it is not done properly.\n            var meta = lib.util.$( \"meta[name='viewport']\" ) || document.createElement( \"meta\" );\n            meta.content = \"width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no\";\n            if ( meta.parentNode !== document.head ) {\n                meta.name = \"viewport\";\n                document.head.appendChild( meta );\n            }\n\n            // Initialize configuration object\n            var rootData = root.dataset;\n            config = {\n                width: lib.util.toNumber( rootData.width, defaults.width ),\n                height: lib.util.toNumber( rootData.height, defaults.height ),\n                maxScale: lib.util.toNumber( rootData.maxScale, defaults.maxScale ),\n                minScale: lib.util.toNumber( rootData.minScale, defaults.minScale ),\n                perspective: lib.util.toNumber( rootData.perspective, defaults.perspective ),\n                transitionDuration: lib.util.toNumber(\n                    rootData.transitionDuration, defaults.transitionDuration\n                )\n            };\n\n            windowScale = computeWindowScale( config );\n\n            // Wrap steps with \"canvas\" element\n            lib.util.arrayify( root.childNodes ).forEach( function( el ) {\n                canvas.appendChild( el );\n            } );\n            root.appendChild( canvas );\n\n            // Set initial styles\n            document.documentElement.style.height = \"100%\";\n\n            css( body, {\n                height: \"100%\",\n                overflow: \"hidden\"\n            } );\n\n            var rootStyles = {\n                position: \"absolute\",\n                transformOrigin: \"top left\",\n                transition: \"all 0s ease-in-out\",\n                transformStyle: \"preserve-3d\"\n            };\n\n            css( root, rootStyles );\n            css( root, {\n                top: \"50%\",\n                left: \"50%\",\n                perspective: ( config.perspective / windowScale ) + \"px\",\n                transform: scale( windowScale )\n            } );\n            css( canvas, rootStyles );\n\n            body.classList.remove( \"impress-disabled\" );\n            body.classList.add( \"impress-enabled\" );\n\n            // Get and init steps\n            initAllSteps();\n\n            // Set a default initial state of the canvas\n            currentState = {\n                translate: { x: 0, y: 0, z: 0 },\n                rotate:    { x: 0, y: 0, z: 0, order: \"xyz\" },\n                scale:     1\n            };\n\n            initialized = true;\n\n            lib.util.triggerEvent( root, \"impress:init\",\n                                   { api: roots[ \"impress-root-\" + rootId ] } );\n        };\n\n        // `getStep` is a helper function that returns a step element defined by parameter.\n        // If a number is given, step with index given by the number is returned, if a string\n        // is given step element with such id is returned, if DOM element is given it is returned\n        // if it is a correct step element.\n        var getStep = function( step ) {\n            if ( typeof step === \"number\" ) {\n                step = step < 0 ? steps[ steps.length + step ] : steps[ step ];\n            } else if ( typeof step === \"string\" ) {\n                step = lib.util.byId( step );\n            }\n            return ( step && step.id && stepsData[ \"impress-\" + step.id ] ) ? step : null;\n        };\n\n        // Used to reset timeout for `impress:stepenter` event\n        var stepEnterTimeout = null;\n\n        // `goto` API function that moves to step given as `el` parameter (by index, id or element).\n        // `duration` optionally given as second parameter, is the transition duration in css.\n        // `reason` is the string \"next\", \"prev\" or \"goto\" (default) and will be made available to\n        // preStepLeave plugins.\n        // `origEvent` may contain event that caused the call to goto, such as a key press event\n        var goto = function( el, duration, reason, origEvent ) {\n            reason = reason || \"goto\";\n            origEvent = origEvent || null;\n\n            if ( !initialized ) {\n                return false;\n            }\n\n            // Re-execute initAllSteps for each transition. This allows to edit step attributes\n            // dynamically, such as change their coordinates, or even remove or add steps, and have\n            // that change apply when goto() is called.\n            initAllSteps();\n\n            if ( !( el = getStep( el ) ) ) {\n                return false;\n            }\n\n            // Sometimes it's possible to trigger focus on first link with some keyboard action.\n            // Browser in such a case tries to scroll the page to make this element visible\n            // (even that body overflow is set to hidden) and it breaks our careful positioning.\n            //\n            // So, as a lousy (and lazy) workaround we will make the page scroll back to the top\n            // whenever slide is selected\n            //\n            // If you are reading this and know any better way to handle it, I'll be glad to hear\n            // about it!\n            window.scrollTo( 0, 0 );\n\n            var step = stepsData[ \"impress-\" + el.id ];\n            duration = ( duration !== undefined ? duration : step.transitionDuration );\n\n            // If we are in fact moving to another step, start with executing the registered\n            // preStepLeave plugins.\n            if ( activeStep && activeStep !== el ) {\n                var event = { target: activeStep, detail: {} };\n                event.detail.next = el;\n                event.detail.transitionDuration = duration;\n                event.detail.reason = reason;\n                if ( origEvent ) {\n                    event.origEvent = origEvent;\n                }\n\n                if ( execPreStepLeavePlugins( event ) === false ) {\n\n                    // PreStepLeave plugins are allowed to abort the transition altogether, by\n                    // returning false.\n                    // see stop and substep plugins for an example of doing just that\n                    return false;\n                }\n\n                // Plugins are allowed to change the detail values\n                el = event.detail.next;\n                step = stepsData[ \"impress-\" + el.id ];\n                duration = event.detail.transitionDuration;\n            }\n\n            if ( activeStep ) {\n                activeStep.classList.remove( \"active\" );\n                body.classList.remove( \"impress-on-\" + activeStep.id );\n            }\n            el.classList.add( \"active\" );\n\n            body.classList.add( \"impress-on-\" + el.id );\n\n            // Compute target state of the canvas based on given step\n            var target = {\n                rotate: {\n                    x: -step.rotate.x,\n                    y: -step.rotate.y,\n                    z: -step.rotate.z,\n                    order: step.rotate.order\n                },\n                translate: {\n                    x: -step.translate.x,\n                    y: -step.translate.y,\n                    z: -step.translate.z\n                },\n                scale: 1 / step.scale\n            };\n\n            // Check if the transition is zooming in or not.\n            //\n            // This information is used to alter the transition style:\n            // when we are zooming in - we start with move and rotate transition\n            // and the scaling is delayed, but when we are zooming out we start\n            // with scaling down and move and rotation are delayed.\n            var zoomin = target.scale >= currentState.scale;\n\n            duration = lib.util.toNumber( duration, config.transitionDuration );\n            var delay = ( duration / 2 );\n\n            // If the same step is re-selected, force computing window scaling,\n            // because it is likely to be caused by window resize\n            if ( el === activeStep ) {\n                windowScale = computeWindowScale( config );\n            }\n\n            var targetScale = target.scale * windowScale;\n\n            // Trigger leave of currently active element (if it's not the same step again)\n            if ( activeStep && activeStep !== el ) {\n                onStepLeave( activeStep, el );\n            }\n\n            // Now we alter transforms of `root` and `canvas` to trigger transitions.\n            //\n            // And here is why there are two elements: `root` and `canvas` - they are\n            // being animated separately:\n            // `root` is used for scaling and `canvas` for translate and rotations.\n            // Transitions on them are triggered with different delays (to make\n            // visually nice and \"natural\" looking transitions), so we need to know\n            // that both of them are finished.\n            css( root, {\n\n                // To keep the perspective look similar for different scales\n                // we need to \"scale\" the perspective, too\n                // For IE 11 support we must specify perspective independent\n                // of transform.\n                perspective: ( config.perspective / targetScale ) + \"px\",\n                transform: scale( targetScale ),\n                transitionDuration: duration + \"ms\",\n                transitionDelay: ( zoomin ? delay : 0 ) + \"ms\"\n            } );\n\n            css( canvas, {\n                transform: rotate( target.rotate, true ) + translate( target.translate ),\n                transitionDuration: duration + \"ms\",\n                transitionDelay: ( zoomin ? 0 : delay ) + \"ms\"\n            } );\n\n            // Here is a tricky part...\n            //\n            // If there is no change in scale or no change in rotation and translation, it means\n            // there was actually no delay - because there was no transition on `root` or `canvas`\n            // elements. We want to trigger `impress:stepenter` event in the correct moment, so\n            // here we compare the current and target values to check if delay should be taken into\n            // account.\n            //\n            // I know that this `if` statement looks scary, but it's pretty simple when you know\n            // what is going on - it's simply comparing all the values.\n            if ( currentState.scale === target.scale ||\n                ( currentState.rotate.x === target.rotate.x &&\n                  currentState.rotate.y === target.rotate.y &&\n                  currentState.rotate.z === target.rotate.z &&\n                  currentState.translate.x === target.translate.x &&\n                  currentState.translate.y === target.translate.y &&\n                  currentState.translate.z === target.translate.z ) ) {\n                delay = 0;\n            }\n\n            // Store current state\n            currentState = target;\n            activeStep = el;\n\n            // And here is where we trigger `impress:stepenter` event.\n            // We simply set up a timeout to fire it taking transition duration (and possible delay)\n            // into account.\n            //\n            // I really wanted to make it in more elegant way. The `transitionend` event seemed to\n            // be the best way to do it, but the fact that I'm using transitions on two separate\n            // elements and that the `transitionend` event is only triggered when there was a\n            // transition (change in the values) caused some bugs and made the code really\n            // complicated, cause I had to handle all the conditions separately. And it still\n            // needed a `setTimeout` fallback for the situations when there is no transition at all.\n            // So I decided that I'd rather make the code simpler than use shiny new\n            // `transitionend`.\n            //\n            // If you want learn something interesting and see how it was done with `transitionend`\n            // go back to version 0.5.2 of impress.js:\n            // http://github.com/bartaz/impress.js/blob/0.5.2/js/impress.js\n            window.clearTimeout( stepEnterTimeout );\n            stepEnterTimeout = window.setTimeout( function() {\n                onStepEnter( activeStep );\n            }, duration + delay );\n\n            return el;\n        };\n\n        // `prev` API function goes to previous step (in document order)\n        // `event` is optional, may contain the event that caused the need to call prev()\n        var prev = function( origEvent ) {\n            var prev = steps.indexOf( activeStep ) - 1;\n            prev = prev >= 0 ? steps[ prev ] : steps[ steps.length - 1 ];\n\n            return goto( prev, undefined, \"prev\", origEvent );\n        };\n\n        // `next` API function goes to next step (in document order)\n        // `event` is optional, may contain the event that caused the need to call next()\n        var next = function( origEvent ) {\n            var next = steps.indexOf( activeStep ) + 1;\n            next = next < steps.length ? steps[ next ] : steps[ 0 ];\n\n            return goto( next, undefined, \"next\", origEvent );\n        };\n\n        // Swipe for touch devices by @and3rson.\n        // Below we extend the api to control the animation between the currently\n        // active step and a presumed next/prev step. See touch plugin for\n        // an example of using this api.\n\n        // Helper function\n        var interpolate = function( a, b, k ) {\n            return a + ( b - a ) * k;\n        };\n\n        // Animate a swipe.\n        //\n        // Pct is a value between -1.0 and +1.0, designating the current length\n        // of the swipe.\n        //\n        // If pct is negative, swipe towards the next() step, if positive,\n        // towards the prev() step.\n        //\n        // Note that pre-stepleave plugins such as goto can mess with what is a\n        // next() and prev() step, so we need to trigger the pre-stepleave event\n        // here, even if a swipe doesn't guarantee that the transition will\n        // actually happen.\n        //\n        // Calling swipe(), with any value of pct, won't in itself cause a\n        // transition to happen, this is just to animate the swipe. Once the\n        // transition is committed - such as at a touchend event - caller is\n        // responsible for also calling prev()/next() as appropriate.\n        //\n        // Note: For now, this function is made available to be used by the swipe plugin (which\n        // is the UI counterpart to this). It is a semi-internal API and intentionally not\n        // documented in DOCUMENTATION.md.\n        var swipe = function( pct ) {\n            if ( Math.abs( pct ) > 1 ) {\n                return;\n            }\n\n            // Prepare & execute the preStepLeave event\n            var event = { target: activeStep, detail: {} };\n            event.detail.swipe = pct;\n\n            // Will be ignored within swipe animation, but just in case a plugin wants to read this,\n            // humor them\n            event.detail.transitionDuration = config.transitionDuration;\n            var idx; // Needed by jshint\n            if ( pct < 0 ) {\n                idx = steps.indexOf( activeStep ) + 1;\n                event.detail.next = idx < steps.length ? steps[ idx ] : steps[ 0 ];\n                event.detail.reason = \"next\";\n            } else if ( pct > 0 ) {\n                idx = steps.indexOf( activeStep ) - 1;\n                event.detail.next = idx >= 0 ? steps[ idx ] : steps[ steps.length - 1 ];\n                event.detail.reason = \"prev\";\n            } else {\n\n                // No move\n                return;\n            }\n            if ( execPreStepLeavePlugins( event ) === false ) {\n\n                // If a preStepLeave plugin wants to abort the transition, don't animate a swipe\n                // For stop, this is probably ok. For substep, the plugin it self might want to do\n                // some animation, but that's not the current implementation.\n                return false;\n            }\n            var nextElement = event.detail.next;\n\n            var nextStep = stepsData[ \"impress-\" + nextElement.id ];\n\n            // If the same step is re-selected, force computing window scaling,\n            var nextScale = nextStep.scale * windowScale;\n            var k = Math.abs( pct );\n\n            var interpolatedStep = {\n                translate: {\n                    x: interpolate( currentState.translate.x, -nextStep.translate.x, k ),\n                    y: interpolate( currentState.translate.y, -nextStep.translate.y, k ),\n                    z: interpolate( currentState.translate.z, -nextStep.translate.z, k )\n                },\n                rotate: {\n                    x: interpolate( currentState.rotate.x, -nextStep.rotate.x, k ),\n                    y: interpolate( currentState.rotate.y, -nextStep.rotate.y, k ),\n                    z: interpolate( currentState.rotate.z, -nextStep.rotate.z, k ),\n\n                    // Unfortunately there's a discontinuity if rotation order changes. Nothing I\n                    // can do about it?\n                    order: k < 0.7 ? currentState.rotate.order : nextStep.rotate.order\n                },\n                scale: interpolate( currentState.scale * windowScale, nextScale, k )\n            };\n\n            css( root, {\n\n                // To keep the perspective look similar for different scales\n                // we need to 'scale' the perspective, too\n                perspective: config.perspective / interpolatedStep.scale + \"px\",\n                transform: scale( interpolatedStep.scale ),\n                transitionDuration: \"0ms\",\n                transitionDelay: \"0ms\"\n            } );\n\n            css( canvas, {\n                transform: rotate( interpolatedStep.rotate, true ) +\n                           translate( interpolatedStep.translate ),\n                transitionDuration: \"0ms\",\n                transitionDelay: \"0ms\"\n            } );\n        };\n\n        // Teardown impress\n        // Resets the DOM to the state it was before impress().init() was called.\n        // (If you called impress(rootId).init() for multiple different rootId's, then you must\n        // also call tear() once for each of them.)\n        var tear = function() {\n            lib.gc.teardown();\n            delete roots[ \"impress-root-\" + rootId ];\n        };\n\n        // Adding some useful classes to step elements.\n        //\n        // All the steps that have not been shown yet are given `future` class.\n        // When the step is entered the `future` class is removed and the `present`\n        // class is given. When the step is left `present` class is replaced with\n        // `past` class.\n        //\n        // So every step element is always in one of three possible states:\n        // `future`, `present` and `past`.\n        //\n        // There classes can be used in CSS to style different types of steps.\n        // For example the `present` class can be used to trigger some custom\n        // animations when step is shown.\n        lib.gc.addEventListener( root, \"impress:init\", function() {\n\n            // STEP CLASSES\n            steps.forEach( function( step ) {\n                step.classList.add( \"future\" );\n            } );\n\n            lib.gc.addEventListener( root, \"impress:stepenter\", function( event ) {\n                event.target.classList.remove( \"past\" );\n                event.target.classList.remove( \"future\" );\n                event.target.classList.add( \"present\" );\n            }, false );\n\n            lib.gc.addEventListener( root, \"impress:stepleave\", function( event ) {\n                event.target.classList.remove( \"present\" );\n                event.target.classList.add( \"past\" );\n            }, false );\n\n        }, false );\n\n        // Adding hash change support.\n        lib.gc.addEventListener( root, \"impress:init\", function() {\n\n            // Last hash detected\n            var lastHash = \"\";\n\n            // `#/step-id` is used instead of `#step-id` to prevent default browser\n            // scrolling to element in hash.\n            //\n            // And it has to be set after animation finishes, because in Chrome it\n            // makes transtion laggy.\n            // BUG: http://code.google.com/p/chromium/issues/detail?id=62820\n            lib.gc.addEventListener( root, \"impress:stepenter\", function( event ) {\n                window.location.hash = lastHash = \"#/\" + event.target.id;\n            }, false );\n\n            lib.gc.addEventListener( window, \"hashchange\", function() {\n\n                // When the step is entered hash in the location is updated\n                // (just few lines above from here), so the hash change is\n                // triggered and we would call `goto` again on the same element.\n                //\n                // To avoid this we store last entered hash and compare.\n                if ( window.location.hash !== lastHash ) {\n                    goto( lib.util.getElementFromHash() );\n                }\n            }, false );\n\n            // START\n            // by selecting step defined in url or first step of the presentation\n            goto( lib.util.getElementFromHash() || steps[ 0 ], 0 );\n        }, false );\n\n        body.classList.add( \"impress-disabled\" );\n\n        // Store and return API for given impress.js root element\n        return ( roots[ \"impress-root-\" + rootId ] = {\n            init: init,\n            goto: goto,\n            next: next,\n            prev: prev,\n            swipe: swipe,\n            tear: tear,\n            lib: lib\n        } );\n\n    };\n\n    // Flag that can be used in JS to check if browser have passed the support test\n    impress.supported = impressSupported;\n\n    // ADD and INIT LIBRARIES\n    // Library factories are defined in src/lib/*.js, and register themselves by calling\n    // impress.addLibraryFactory(libraryFactoryObject). They're stored here, and used to augment\n    // the API with library functions when client calls impress(rootId).\n    // See src/lib/README.md for clearer example.\n    // (Advanced usage: For different values of rootId, a different instance of the libaries are\n    // generated, in case they need to hold different state for different root elements.)\n    var libraryFactories = {};\n    impress.addLibraryFactory = function( obj ) {\n        for ( var libname in obj ) {\n            if ( obj.hasOwnProperty( libname ) ) {\n                libraryFactories[ libname ] = obj[ libname ];\n            }\n        }\n    };\n\n    // Call each library factory, and return the lib object that is added to the api.\n    var initLibraries = function( rootId ) { //jshint ignore:line\n        var lib = {};\n        for ( var libname in libraryFactories ) {\n            if ( libraryFactories.hasOwnProperty( libname ) ) {\n                if ( lib[ libname ] !== undefined ) {\n                    throw \"impress.js ERROR: Two libraries both tried to use libname: \" +  libname;\n                }\n                lib[ libname ] = libraryFactories[ libname ]( rootId );\n            }\n        }\n        return lib;\n    };\n\n    // `addPreInitPlugin` allows plugins to register a function that should\n    // be run (synchronously) at the beginning of init, before\n    // impress().init() itself executes.\n    impress.addPreInitPlugin = function( plugin, weight ) {\n        weight = parseInt( weight ) || 10;\n        if ( weight <= 0 ) {\n            throw \"addPreInitPlugin: weight must be a positive integer\";\n        }\n\n        if ( preInitPlugins[ weight ] === undefined ) {\n            preInitPlugins[ weight ] = [];\n        }\n        preInitPlugins[ weight ].push( plugin );\n    };\n\n    // Called at beginning of init, to execute all pre-init plugins.\n    var execPreInitPlugins = function( root ) { //jshint ignore:line\n        for ( var i = 0; i < preInitPlugins.length; i++ ) {\n            var thisLevel = preInitPlugins[ i ];\n            if ( thisLevel !== undefined ) {\n                for ( var j = 0; j < thisLevel.length; j++ ) {\n                    thisLevel[ j ]( root );\n                }\n            }\n        }\n    };\n\n    // `addPreStepLeavePlugin` allows plugins to register a function that should\n    // be run (synchronously) at the beginning of goto()\n    impress.addPreStepLeavePlugin = function( plugin, weight ) { //jshint ignore:line\n        weight = parseInt( weight ) || 10;\n        if ( weight <= 0 ) {\n            throw \"addPreStepLeavePlugin: weight must be a positive integer\";\n        }\n\n        if ( preStepLeavePlugins[ weight ] === undefined ) {\n            preStepLeavePlugins[ weight ] = [];\n        }\n        preStepLeavePlugins[ weight ].push( plugin );\n    };\n\n    // Called at beginning of goto(), to execute all preStepLeave plugins.\n    var execPreStepLeavePlugins = function( event ) { //jshint ignore:line\n        for ( var i = 0; i < preStepLeavePlugins.length; i++ ) {\n            var thisLevel = preStepLeavePlugins[ i ];\n            if ( thisLevel !== undefined ) {\n                for ( var j = 0; j < thisLevel.length; j++ ) {\n                    if ( thisLevel[ j ]( event ) === false ) {\n\n                        // If a plugin returns false, the stepleave event (and related transition)\n                        // is aborted\n                        return false;\n                    }\n                }\n            }\n        }\n    };\n\n} )( document, window );\n\n// THAT'S ALL FOLKS!\n//\n// Thanks for reading it all.\n// Or thanks for scrolling down and reading the last part.\n//\n// I've learnt a lot when building impress.js and I hope this code and comments\n// will help somebody learn at least some part of it.\n\n/**\n * Garbage collection utility\n *\n * This library allows plugins to add elements and event listeners they add to the DOM. The user\n * can call `impress().lib.gc.teardown()` to cause all of them to be removed from DOM, so that\n * the document is in the state it was before calling `impress().init()`.\n *\n * In addition to just adding elements and event listeners to the garbage collector, plugins\n * can also register callback functions to do arbitrary cleanup upon teardown.\n *\n * Henrik Ingo (c) 2016\n * MIT License\n */\n\n( function( document, window ) {\n    \"use strict\";\n    var roots = [];\n    var rootsCount = 0;\n    var startingState = { roots: [] };\n\n    var libraryFactory = function( rootId ) {\n        if ( roots[ rootId ] ) {\n            return roots[ rootId ];\n        }\n\n        // Per root global variables (instance variables?)\n        var elementList = [];\n        var eventListenerList = [];\n        var callbackList = [];\n\n        recordStartingState( rootId );\n\n        // LIBRARY FUNCTIONS\n        // Definitions of the library functions we return as an object at the end\n\n        // `pushElement` adds a DOM element to the gc stack\n        var pushElement = function( element ) {\n            elementList.push( element );\n        };\n\n        // `appendChild` is a convenience wrapper that combines DOM appendChild with gc.pushElement\n        var appendChild = function( parent, element ) {\n            parent.appendChild( element );\n            pushElement( element );\n        };\n\n        // `pushEventListener` adds an event listener to the gc stack\n        var pushEventListener = function( target, type, listenerFunction ) {\n            eventListenerList.push( { target:target, type:type, listener:listenerFunction } );\n        };\n\n        // `addEventListener` combines DOM addEventListener with gc.pushEventListener\n        var addEventListener = function( target, type, listenerFunction ) {\n            target.addEventListener( type, listenerFunction );\n            pushEventListener( target, type, listenerFunction );\n        };\n\n        // `pushCallback` If the above utilities are not enough, plugins can add their own callback\n        // function to do arbitrary things.\n        var pushCallback = function( callback ) {\n            callbackList.push( callback );\n        };\n        pushCallback( function( rootId ) { resetStartingState( rootId ); } );\n\n        // `teardown` will\n        // - execute all callbacks in LIFO order\n        // - call `removeChild` on all DOM elements in LIFO order\n        // - call `removeEventListener` on all event listeners in LIFO order\n        // The goal of a teardown is to return to the same state that the DOM was before\n        // `impress().init()` was called.\n        var teardown = function() {\n\n            // Execute the callbacks in LIFO order\n            var i; // Needed by jshint\n            for ( i = callbackList.length - 1; i >= 0; i-- ) {\n                callbackList[ i ]( rootId );\n            }\n            callbackList = [];\n            for ( i = 0; i < elementList.length; i++ ) {\n                elementList[ i ].parentElement.removeChild( elementList[ i ] );\n            }\n            elementList = [];\n            for ( i = 0; i < eventListenerList.length; i++ ) {\n                var target   = eventListenerList[ i ].target;\n                var type     = eventListenerList[ i ].type;\n                var listener = eventListenerList[ i ].listener;\n                target.removeEventListener( type, listener );\n            }\n        };\n\n        var lib = {\n            pushElement: pushElement,\n            appendChild: appendChild,\n            pushEventListener: pushEventListener,\n            addEventListener: addEventListener,\n            pushCallback: pushCallback,\n            teardown: teardown\n        };\n        roots[ rootId ] = lib;\n        rootsCount++;\n        return lib;\n    };\n\n    // Let impress core know about the existence of this library\n    window.impress.addLibraryFactory( { gc: libraryFactory } );\n\n    // CORE INIT\n    // The library factory (gc(rootId)) is called at the beginning of impress(rootId).init()\n    // For the purposes of teardown(), we can use this as an opportunity to save the state\n    // of a few things in the DOM in their virgin state, before impress().init() did anything.\n    // Note: These could also be recorded by the code in impress.js core as these values\n    // are changed, but in an effort to not deviate too much from upstream, I'm adding\n    // them here rather than the core itself.\n    var recordStartingState = function( rootId ) {\n        startingState.roots[ rootId ] = {};\n        startingState.roots[ rootId ].steps = [];\n\n        // Record whether the steps have an id or not\n        var steps = document.getElementById( rootId ).querySelectorAll( \".step\" );\n        for ( var i = 0; i < steps.length; i++ ) {\n            var el = steps[ i ];\n            startingState.roots[ rootId ].steps.push( {\n                el: el,\n                id: el.getAttribute( \"id\" )\n            } );\n        }\n\n        // In the rare case of multiple roots, the following is changed on first init() and\n        // reset at last tear().\n        if ( rootsCount === 0 ) {\n            startingState.body = {};\n\n            // It is customary for authors to set body.class=\"impress-not-supported\" as a starting\n            // value, which can then be removed by impress().init(). But it is not required.\n            // Remember whether it was there or not.\n            if ( document.body.classList.contains( \"impress-not-supported\" ) ) {\n                startingState.body.impressNotSupported = true;\n            } else {\n                startingState.body.impressNotSupported = false;\n            }\n\n            // If there's a <meta name=\"viewport\"> element, its contents will be overwritten by init\n            var metas = document.head.querySelectorAll( \"meta\" );\n            for ( i = 0; i < metas.length; i++ ) {\n                var m = metas[ i ];\n                if ( m.name === \"viewport\" ) {\n                    startingState.meta = m.content;\n                }\n            }\n        }\n    };\n\n    // CORE TEARDOWN\n    var resetStartingState = function( rootId ) {\n\n        // Reset body element\n        document.body.classList.remove( \"impress-enabled\" );\n        document.body.classList.remove( \"impress-disabled\" );\n\n        var root = document.getElementById( rootId );\n        var activeId = root.querySelector( \".active\" ).id;\n        document.body.classList.remove( \"impress-on-\" + activeId );\n\n        document.documentElement.style.height = \"\";\n        document.body.style.height = \"\";\n        document.body.style.overflow = \"\";\n\n        // Remove style values from the root and step elements\n        // Note: We remove the ones set by impress.js core. Otoh, we didn't preserve any original\n        // values. A more sophisticated implementation could keep track of original values and then\n        // reset those.\n        var steps = root.querySelectorAll( \".step\" );\n        for ( var i = 0; i < steps.length; i++ ) {\n            steps[ i ].classList.remove( \"future\" );\n            steps[ i ].classList.remove( \"past\" );\n            steps[ i ].classList.remove( \"present\" );\n            steps[ i ].classList.remove( \"active\" );\n            steps[ i ].style.position = \"\";\n            steps[ i ].style.transform = \"\";\n            steps[ i ].style[ \"transform-style\" ] = \"\";\n        }\n        root.style.position = \"\";\n        root.style[ \"transform-origin\" ] = \"\";\n        root.style.transition = \"\";\n        root.style[ \"transform-style\" ] = \"\";\n        root.style.top = \"\";\n        root.style.left = \"\";\n        root.style.transform = \"\";\n\n        // Reset id of steps (\"step-1\" id's are auto generated)\n        steps = startingState.roots[ rootId ].steps;\n        var step;\n        while ( step = steps.pop() ) {\n            if ( step.id === null ) {\n                step.el.removeAttribute( \"id\" );\n            } else {\n                step.el.setAttribute( \"id\", step.id );\n            }\n        }\n        delete startingState.roots[ rootId ];\n\n        // Move step div elements away from canvas, then delete canvas\n        // Note: There's an implicit assumption here that the canvas div is the only child element\n        // of the root div. If there would be something else, it's gonna be lost.\n        var canvas = root.firstChild;\n        var canvasHTML = canvas.innerHTML;\n        root.innerHTML = canvasHTML;\n\n        if ( roots[ rootId ] !== undefined ) {\n            delete roots[ rootId ];\n            rootsCount--;\n        }\n        if ( rootsCount === 0 ) {\n\n            // In the rare case that more than one impress root elements were initialized, these\n            // are only reset when all are uninitialized.\n            document.body.classList.remove( \"impress-supported\" );\n            if ( startingState.body.impressNotSupported ) {\n                document.body.classList.add( \"impress-not-supported\" );\n            }\n\n            // We need to remove or reset the meta element inserted by impress.js\n            var metas = document.head.querySelectorAll( \"meta\" );\n            for ( i = 0; i < metas.length; i++ ) {\n                var m = metas[ i ];\n                if ( m.name === \"viewport\" ) {\n                    if ( startingState.meta !== undefined ) {\n                        m.content = startingState.meta;\n                    } else {\n                        m.parentElement.removeChild( m );\n                    }\n                }\n            }\n        }\n\n    };\n\n} )( document, window );\n\n/**\n * Common utility functions\n *\n * Copyright 2011-2012 Bartek Szopka (@bartaz)\n * Henrik Ingo (c) 2016\n * MIT License\n */\n\n( function( document, window ) {\n    \"use strict\";\n    var roots = [];\n\n    var libraryFactory = function( rootId ) {\n        if ( roots[ rootId ] ) {\n            return roots[ rootId ];\n        }\n\n        // `$` returns first element for given CSS `selector` in the `context` of\n        // the given element or whole document.\n        var $ = function( selector, context ) {\n            context = context || document;\n            return context.querySelector( selector );\n        };\n\n        // `$$` return an array of elements for given CSS `selector` in the `context` of\n        // the given element or whole document.\n        var $$ = function( selector, context ) {\n            context = context || document;\n            return arrayify( context.querySelectorAll( selector ) );\n        };\n\n        // `arrayify` takes an array-like object and turns it into real Array\n        // to make all the Array.prototype goodness available.\n        var arrayify = function( a ) {\n            return [].slice.call( a );\n        };\n\n        // `byId` returns element with given `id` - you probably have guessed that ;)\n        var byId = function( id ) {\n            return document.getElementById( id );\n        };\n\n        // `getElementFromHash` returns an element located by id from hash part of\n        // window location.\n        var getElementFromHash = function() {\n\n            // Get id from url # by removing `#` or `#/` from the beginning,\n            // so both \"fallback\" `#slide-id` and \"enhanced\" `#/slide-id` will work\n            return byId( window.location.hash.replace( /^#\\/?/, \"\" ) );\n        };\n\n        // `getUrlParamValue` return a given URL parameter value if it exists\n        // `undefined` if it doesn't exist\n        var getUrlParamValue = function( parameter ) {\n            var chunk = window.location.search.split( parameter + \"=\" )[ 1 ];\n            var value = chunk && chunk.split( \"&\" )[ 0 ];\n\n            if ( value !== \"\" ) {\n                return value;\n            }\n        };\n\n        // Throttling function calls, by Remy Sharp\n        // http://remysharp.com/2010/07/21/throttling-function-calls/\n        var throttle = function( fn, delay ) {\n            var timer = null;\n            return function() {\n                var context = this, args = arguments;\n                window.clearTimeout( timer );\n                timer = window.setTimeout( function() {\n                    fn.apply( context, args );\n                }, delay );\n            };\n        };\n\n        // `toNumber` takes a value given as `numeric` parameter and tries to turn\n        // it into a number. If it is not possible it returns 0 (or other value\n        // given as `fallback`).\n        var toNumber = function( numeric, fallback ) {\n            return isNaN( numeric ) ? ( fallback || 0 ) : Number( numeric );\n        };\n\n        // `triggerEvent` builds a custom DOM event with given `eventName` and `detail` data\n        // and triggers it on element given as `el`.\n        var triggerEvent = function( el, eventName, detail ) {\n            var event = document.createEvent( \"CustomEvent\" );\n            event.initCustomEvent( eventName, true, true, detail );\n            el.dispatchEvent( event );\n        };\n\n        var lib = {\n            $: $,\n            $$: $$,\n            arrayify: arrayify,\n            byId: byId,\n            getElementFromHash: getElementFromHash,\n            throttle: throttle,\n            toNumber: toNumber,\n            triggerEvent: triggerEvent,\n            getUrlParamValue: getUrlParamValue\n        };\n        roots[ rootId ] = lib;\n        return lib;\n    };\n\n    // Let impress core know about the existence of this library\n    window.impress.addLibraryFactory( { util: libraryFactory } );\n\n} )( document, window );\n\n/**\n * Autoplay plugin - Automatically advance slideshow after N seconds\n *\n * Copyright 2016 Henrik Ingo, henrik.ingo@avoinelama.fi\n * Released under the MIT license.\n */\n/* global clearTimeout, setTimeout, document */\n\n( function( document ) {\n    \"use strict\";\n\n    var autoplayDefault = 0;\n    var currentStepTimeout = 0;\n    var api = null;\n    var timeoutHandle = null;\n    var root = null;\n    var util;\n\n    // On impress:init, check whether there is a default setting, as well as\n    // handle step-1.\n    document.addEventListener( \"impress:init\", function( event ) {\n        util = event.detail.api.lib.util;\n\n        // Getting API from event data instead of global impress().init().\n        // You don't even need to know what is the id of the root element\n        // or anything. `impress:init` event data gives you everything you\n        // need to control the presentation that was just initialized.\n        api = event.detail.api;\n        root = event.target;\n\n        // Element attributes starting with \"data-\", become available under\n        // element.dataset. In addition hyphenized words become camelCased.\n        var data = root.dataset;\n        var autoplay = util.getUrlParamValue( \"impress-autoplay\" ) || data.autoplay;\n\n        if ( autoplay ) {\n            autoplayDefault = util.toNumber( autoplay, 0 );\n        }\n\n        var toolbar = document.querySelector( \"#impress-toolbar\" );\n        if ( toolbar ) {\n            addToolbarButton( toolbar );\n        }\n\n        api.lib.gc.pushCallback( function() {\n            clearTimeout( timeoutHandle );\n        } );\n\n        // Note that right after impress:init event, also impress:stepenter is\n        // triggered for the first slide, so that's where code flow continues.\n    }, false );\n\n    document.addEventListener( \"impress:autoplay:pause\", function( event ) {\n        status = \"paused\";\n        reloadTimeout( event );\n    }, false );\n\n    document.addEventListener( \"impress:autoplay:play\", function( event ) {\n        status = \"playing\";\n        reloadTimeout( event );\n    }, false );\n\n    // If default autoplay time was defined in the presentation root, or\n    // in this step, set timeout.\n    var reloadTimeout = function( event ) {\n        var step = event.target;\n        currentStepTimeout = util.toNumber( step.dataset.autoplay, autoplayDefault );\n        if ( status === \"paused\" ) {\n            setAutoplayTimeout( 0 );\n        } else {\n            setAutoplayTimeout( currentStepTimeout );\n        }\n    };\n\n    document.addEventListener( \"impress:stepenter\", function( event ) {\n        reloadTimeout( event );\n    }, false );\n\n    document.addEventListener( \"impress:substep:enter\", function( event ) {\n        reloadTimeout( event );\n    }, false );\n\n    /**\n     * Set timeout after which we move to next() step.\n     */\n    var setAutoplayTimeout = function( timeout ) {\n        if ( timeoutHandle ) {\n            clearTimeout( timeoutHandle );\n        }\n\n        if ( timeout > 0 ) {\n            timeoutHandle = setTimeout( function() { api.next(); }, timeout * 1000 );\n        }\n        setButtonText();\n    };\n\n    /*** Toolbar plugin integration *******************************************/\n    var status = \"not clicked\";\n    var toolbarButton = null;\n\n    var makeDomElement = function( html ) {\n        var tempDiv = document.createElement( \"div\" );\n        tempDiv.innerHTML = html;\n        return tempDiv.firstChild;\n    };\n\n    var toggleStatus = function() {\n        if ( currentStepTimeout > 0 && status !== \"paused\" ) {\n            status = \"paused\";\n        } else {\n            status = \"playing\";\n        }\n    };\n\n    var getButtonText = function() {\n        if ( currentStepTimeout > 0 && status !== \"paused\" ) {\n            return \"||\"; // Pause\n        } else {\n            return \"&#9654;\"; // Play\n        }\n    };\n\n    var setButtonText = function() {\n        if ( toolbarButton ) {\n\n            // Keep button size the same even if label content is changing\n            var buttonWidth = toolbarButton.offsetWidth;\n            var buttonHeight = toolbarButton.offsetHeight;\n            toolbarButton.innerHTML = getButtonText();\n            if ( !toolbarButton.style.width ) {\n                toolbarButton.style.width = buttonWidth + \"px\";\n            }\n            if ( !toolbarButton.style.height ) {\n                toolbarButton.style.height = buttonHeight + \"px\";\n            }\n        }\n    };\n\n    var addToolbarButton = function( toolbar ) {\n        var html = '<button id=\"impress-autoplay-playpause\" ' + // jshint ignore:line\n                   'title=\"Autoplay\" class=\"impress-autoplay\">' + // jshint ignore:line\n                   getButtonText() + \"</button>\"; // jshint ignore:line\n        toolbarButton = makeDomElement( html );\n        toolbarButton.addEventListener( \"click\", function() {\n            toggleStatus();\n            if ( status === \"playing\" ) {\n                if ( autoplayDefault === 0 ) {\n                    autoplayDefault = 7;\n                }\n                if ( currentStepTimeout === 0 ) {\n                    currentStepTimeout = autoplayDefault;\n                }\n                setAutoplayTimeout( currentStepTimeout );\n            } else if ( status === \"paused\" ) {\n                setAutoplayTimeout( 0 );\n            }\n        } );\n\n        util.triggerEvent( toolbar, \"impress:toolbar:appendChild\",\n                      { group: 10, element: toolbarButton } );\n    };\n\n} )( document );\n\n/**\n * Blackout plugin\n *\n * Press b or . to hide all slides, and b or . again to show them.\n * Also navigating to a different slide will show them again (impress:stepleave).\n *\n * Copyright 2014 @Strikeskids\n * Released under the MIT license.\n */\n/* global document */\n\n( function( document ) {\n    \"use strict\";\n\n    var canvas = null;\n    var blackedOut = false;\n    var util = null;\n    var root = null;\n    var api = null;\n\n    // While waiting for a shared library of utilities, copying these 2 from main impress.js\n    var css = function( el, props ) {\n        var key, pkey;\n        for ( key in props ) {\n            if ( props.hasOwnProperty( key ) ) {\n                pkey = pfx( key );\n                if ( pkey !== null ) {\n                    el.style[ pkey ] = props[ key ];\n                }\n            }\n        }\n        return el;\n    };\n\n    var pfx = ( function() {\n\n        var style = document.createElement( \"dummy\" ).style,\n            prefixes = \"Webkit Moz O ms Khtml\".split( \" \" ),\n            memory = {};\n\n        return function( prop ) {\n            if ( typeof memory[ prop ] === \"undefined\" ) {\n\n                var ucProp  = prop.charAt( 0 ).toUpperCase() + prop.substr( 1 ),\n                    props   = ( prop + \" \" + prefixes.join( ucProp + \" \" ) + ucProp ).split( \" \" );\n\n                memory[ prop ] = null;\n                for ( var i in props ) {\n                    if ( style[ props[ i ] ] !== undefined ) {\n                        memory[ prop ] = props[ i ];\n                        break;\n                    }\n                }\n\n            }\n\n            return memory[ prop ];\n        };\n\n    } )();\n\n    var removeBlackout = function() {\n        if ( blackedOut ) {\n            css( canvas, {\n                display: \"block\"\n            } );\n            blackedOut = false;\n            util.triggerEvent( root, \"impress:autoplay:play\", {} );\n        }\n    };\n\n    var blackout = function() {\n        if ( blackedOut ) {\n            removeBlackout();\n        } else {\n            css( canvas, {\n                display: ( blackedOut = !blackedOut ) ? \"none\" : \"block\"\n            } );\n            blackedOut = true;\n            util.triggerEvent( root, \"impress:autoplay:pause\", {} );\n        }\n    };\n\n    // Wait for impress.js to be initialized\n    document.addEventListener( \"impress:init\", function( event ) {\n        api = event.detail.api;\n        util = api.lib.util;\n        root = event.target;\n        canvas = root.firstElementChild;\n        var gc = api.lib.gc;\n        var util = api.lib.util;\n\n        gc.addEventListener( document, \"keydown\", function( event ) {\n\n            // Accept b or . -> . is sent by presentation remote controllers\n            if ( event.keyCode === 66 || event.keyCode === 190 ) {\n                event.preventDefault();\n                if ( !blackedOut ) {\n                    blackout();\n                } else {\n                    removeBlackout();\n                }\n            }\n        }, false );\n\n        gc.addEventListener( document, \"keyup\", function( event ) {\n\n            // Accept b or . -> . is sent by presentation remote controllers\n            if ( event.keyCode === 66 || event.keyCode === 190 ) {\n                event.preventDefault();\n            }\n        }, false );\n\n    }, false );\n\n    document.addEventListener( \"impress:stepleave\", function() {\n        removeBlackout();\n    }, false );\n\n} )( document );\n\n\n/**\n * Extras Plugin\n *\n * This plugin performs initialization (like calling mermaid.initialize())\n * for the extras/ plugins if they are loaded into a presentation.\n *\n * See README.md for details.\n *\n * Copyright 2016 Henrik Ingo (@henrikingo)\n * Released under the MIT license.\n */\n/* global markdown, hljs, mermaid, impress, document, window */\n\n( function( document, window ) {\n    \"use strict\";\n\n    var preInit = function() {\n        if ( window.markdown ) {\n\n            // Unlike the other extras, Markdown.js doesn't by default do anything in\n            // particular. We do it ourselves here.\n            // In addition, we use \"-----\" as a delimiter for new slide.\n\n            // Query all .markdown elements and translate to HTML\n            var markdownDivs = document.querySelectorAll( \".markdown\" );\n            for ( var idx = 0; idx < markdownDivs.length; idx++ ) {\n              var element = markdownDivs[ idx ];\n              var dialect = element.dataset.markdownDialect;\n\n              var slides = element.textContent.split( /^-----$/m );\n              var i = slides.length - 1;\n              element.innerHTML = markdown.toHTML( slides[ i ], dialect );\n\n              // If there's an id, unset it for last, and all other, elements,\n              // and then set it for the first.\n              var id = null;\n              if ( element.id ) {\n                id = element.id;\n                element.id = \"\";\n              }\n              i--;\n              while ( i >= 0 ) {\n                var newElement = element.cloneNode( false );\n                newElement.innerHTML = markdown.toHTML( slides[ i ] );\n                element.parentNode.insertBefore( newElement, element );\n                element = newElement;\n                i--;\n              }\n              if ( id !== null ) {\n                element.id = id;\n              }\n            }\n        } // Markdown\n\n        if ( window.hljs ) {\n            hljs.initHighlightingOnLoad();\n        }\n\n        if ( window.mermaid ) {\n            mermaid.initialize( { startOnLoad:true } );\n        }\n    };\n\n    // Register the plugin to be called in pre-init phase\n    // Note: Markdown.js should run early/first, because it creates new div elements.\n    // So add this with a lower-than-default weight.\n    impress.addPreInitPlugin( preInit, 1 );\n\n} )( document, window );\n\n\n/**\n * Form support\n *\n * Functionality to better support use of input, textarea, button... elements in a presentation.\n *\n * This plugin does two things:\n *\n * Set stopPropagation on any element that might take text input. This allows users to type, for\n * example, the letter 'P' into a form field, without causing the presenter console to spring up.\n *\n * On impress:stepleave, de-focus any potentially active\n * element. This is to prevent the focus from being left in a form element that is no longer visible\n * in the window, and user therefore typing garbage into the form.\n *\n * TODO: Currently it is not possible to use TAB to navigate between form elements. Impress.js, and\n * in particular the navigation plugin, unfortunately must fully take control of the tab key,\n * otherwise a user could cause the browser to scroll to a link or button that's not on the current\n * step. However, it could be possible to allow tab navigation between form elements, as long as\n * they are on the active step. This is a topic for further study.\n *\n * Copyright 2016 Henrik Ingo\n * MIT License\n */\n/* global document */\n( function( document ) {\n    \"use strict\";\n    var root;\n    var api;\n\n    document.addEventListener( \"impress:init\", function( event ) {\n        root = event.target;\n        api = event.detail.api;\n        var gc = api.lib.gc;\n\n        var selectors = [ \"input\", \"textarea\", \"select\", \"[contenteditable=true]\" ];\n        for ( var selector of selectors ) {\n            var elements = document.querySelectorAll( selector );\n            if ( !elements ) {\n                continue;\n            }\n\n            for ( var i = 0; i < elements.length; i++ ) {\n                var e = elements[ i ];\n                gc.addEventListener( e, \"keydown\", function( event ) {\n                    event.stopPropagation();\n                } );\n                gc.addEventListener( e, \"keyup\", function( event ) {\n                    event.stopPropagation();\n                } );\n            }\n        }\n    }, false );\n\n    document.addEventListener( \"impress:stepleave\", function() {\n        document.activeElement.blur();\n    }, false );\n\n} )( document );\n\n\n/**\n * Fullscreen plugin\n *\n * Press F5 to enter fullscreen and ESC to exit fullscreen mode.\n *\n * Copyright 2019 @giflw\n * Released under the MIT license.\n */\n/* global document */\n\n( function( document ) {\n    \"use strict\";\n\n    function enterFullscreen() {\n        var elem = document.documentElement;\n        if ( !document.fullscreenElement ) {\n            elem.requestFullscreen();\n        }\n    }\n\n    function exitFullscreen() {\n        if ( document.fullscreenElement ) {\n            document.exitFullscreen();\n        }\n    }\n\n    // Wait for impress.js to be initialized\n    document.addEventListener( \"impress:init\", function( event ) {\n        var api = event.detail.api;\n        var root = event.target;\n        var gc = api.lib.gc;\n        var util = api.lib.util;\n\n        gc.addEventListener( document, \"keydown\", function( event ) {\n\n            // 116 (F5) is sent by presentation remote controllers\n            if ( event.code === \"F5\" ) {\n                event.preventDefault();\n                enterFullscreen();\n                util.triggerEvent( root.querySelector( \".active\" ), \"impress:steprefresh\" );\n            }\n\n            // 27 (Escape) is sent by presentation remote controllers\n            if ( event.key === \"Escape\" || event.key === \"F5\" ) {\n                event.preventDefault();\n                exitFullscreen();\n                util.triggerEvent( root.querySelector( \".active\" ), \"impress:steprefresh\" );\n            }\n        }, false );\n\n        util.triggerEvent( document, \"impress:help:add\",\n            { command: \"F5 / ESC\", text: \"Fullscreen: Enter / Exit\", row: 200 } );\n\n    }, false );\n\n} )( document );\n\n\n/**\n * Goto Plugin\n *\n * The goto plugin is a pre-stepleave plugin. It is executed before impress:stepleave,\n * and will alter the destination where to transition next.\n *\n * Example:\n *\n *         <!-- When leaving this step, go directly to \"step-5\" -->\n *         <div class=\"step\" data-goto=\"step-5\">\n *\n *         <!-- When leaving this step with next(), go directly to \"step-5\", instead of next step.\n *              If moving backwards to previous step - e.g. prev() instead of next() -\n *              then go to \"step-1\". -->\n *         <div class=\"step\" data-goto-next=\"step-5\" data-goto-prev=\"step-1\">\n *\n *        <!-- data-goto-key-list and data-goto-next-list allow you to build advanced non-linear\n *             navigation. -->\n *        <div class=\"step\"\n *             data-goto-key-list=\"ArrowUp ArrowDown ArrowRight ArrowLeft\"\n *             data-goto-next-list=\"step-4 step-3 step-2 step-5\">\n *\n * See https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key/Key_Values for a table\n * of what strings to use for each key.\n *\n * Copyright 2016-2017 Henrik Ingo (@henrikingo)\n * Released under the MIT license.\n */\n/* global window, document, impress */\n\n( function( document, window ) {\n    \"use strict\";\n    var lib;\n\n    document.addEventListener( \"impress:init\", function( event ) {\n        lib = event.detail.api.lib;\n    }, false );\n\n    var isNumber = function( numeric ) {\n        return !isNaN( numeric );\n    };\n\n    var goto = function( event ) {\n        if ( ( !event ) || ( !event.target ) ) {\n            return;\n        }\n\n        var data = event.target.dataset;\n        var steps = document.querySelectorAll( \".step\" );\n\n        // Data-goto-key-list=\"\" & data-goto-next-list=\"\" //////////////////////////////////////////\n        if ( data.gotoKeyList !== undefined &&\n             data.gotoNextList !== undefined &&\n             event.origEvent !== undefined &&\n             event.origEvent.key !== undefined ) {\n            var keylist = data.gotoKeyList.split( \" \" );\n            var nextlist = data.gotoNextList.split( \" \" );\n\n            if ( keylist.length !== nextlist.length ) {\n                window.console.log(\n                    \"impress goto plugin: data-goto-key-list and data-goto-next-list don't match:\"\n                );\n                window.console.log( keylist );\n                window.console.log( nextlist );\n\n                // Don't return, allow the other categories to work despite this error\n            } else {\n                var index = keylist.indexOf( event.origEvent.key );\n                if ( index >= 0 ) {\n                    var next = nextlist[ index ];\n                    if ( isNumber( next ) ) {\n                        event.detail.next = steps[ next ];\n\n                        // If the new next element has its own transitionDuration, we're responsible\n                        // for setting that on the event as well\n                        event.detail.transitionDuration = lib.util.toNumber(\n                            event.detail.next.dataset.transitionDuration,\n                            event.detail.transitionDuration\n                        );\n                        return;\n                    } else {\n                        var newTarget = document.getElementById( next );\n                        if ( newTarget && newTarget.classList.contains( \"step\" ) ) {\n                            event.detail.next = newTarget;\n                            event.detail.transitionDuration = lib.util.toNumber(\n                                event.detail.next.dataset.transitionDuration,\n                                event.detail.transitionDuration\n                            );\n                            return;\n                        } else {\n                            window.console.log( \"impress goto plugin: \" + next +\n                                                \" is not a step in this impress presentation.\" );\n                        }\n                    }\n                }\n            }\n        }\n\n        // Data-goto-next=\"\" & data-goto-prev=\"\" ///////////////////////////////////////////////////\n\n        // Handle event.target data-goto-next attribute\n        if ( isNumber( data.gotoNext ) && event.detail.reason === \"next\" ) {\n            event.detail.next = steps[ data.gotoNext ];\n\n            // If the new next element has its own transitionDuration, we're responsible for setting\n            // that on the event as well\n            event.detail.transitionDuration = lib.util.toNumber(\n                event.detail.next.dataset.transitionDuration, event.detail.transitionDuration\n            );\n            return;\n        }\n        if ( data.gotoNext && event.detail.reason === \"next\" ) {\n            var newTarget = document.getElementById( data.gotoNext ); // jshint ignore:line\n            if ( newTarget && newTarget.classList.contains( \"step\" ) ) {\n                event.detail.next = newTarget;\n                event.detail.transitionDuration = lib.util.toNumber(\n                    event.detail.next.dataset.transitionDuration,\n                    event.detail.transitionDuration\n                );\n                return;\n            } else {\n                window.console.log( \"impress goto plugin: \" + data.gotoNext +\n                                    \" is not a step in this impress presentation.\" );\n            }\n        }\n\n        // Handle event.target data-goto-prev attribute\n        if ( isNumber( data.gotoPrev ) && event.detail.reason === \"prev\" ) {\n            event.detail.next = steps[ data.gotoPrev ];\n            event.detail.transitionDuration = lib.util.toNumber(\n                event.detail.next.dataset.transitionDuration, event.detail.transitionDuration\n            );\n            return;\n        }\n        if ( data.gotoPrev && event.detail.reason === \"prev\" ) {\n            var newTarget = document.getElementById( data.gotoPrev ); // jshint ignore:line\n            if ( newTarget && newTarget.classList.contains( \"step\" ) ) {\n                event.detail.next = newTarget;\n                event.detail.transitionDuration = lib.util.toNumber(\n                    event.detail.next.dataset.transitionDuration, event.detail.transitionDuration\n                );\n                return;\n            } else {\n                window.console.log( \"impress goto plugin: \" + data.gotoPrev +\n                                    \" is not a step in this impress presentation.\" );\n            }\n        }\n\n        // Data-goto=\"\" ///////////////////////////////////////////////////////////////////////////\n\n        // Handle event.target data-goto attribute\n        if ( isNumber( data.goto ) ) {\n            event.detail.next = steps[ data.goto ];\n            event.detail.transitionDuration = lib.util.toNumber(\n                event.detail.next.dataset.transitionDuration, event.detail.transitionDuration\n            );\n            return;\n        }\n        if ( data.goto ) {\n            var newTarget = document.getElementById( data.goto ); // jshint ignore:line\n            if ( newTarget && newTarget.classList.contains( \"step\" ) ) {\n                event.detail.next = newTarget;\n                event.detail.transitionDuration = lib.util.toNumber(\n                    event.detail.next.dataset.transitionDuration, event.detail.transitionDuration\n                );\n                return;\n            } else {\n                window.console.log( \"impress goto plugin: \" + data.goto +\n                                    \" is not a step in this impress presentation.\" );\n            }\n        }\n    };\n\n    // Register the plugin to be called in pre-stepleave phase\n    impress.addPreStepLeavePlugin( goto );\n\n} )( document, window );\n\n\n/**\n * Help popup plugin\n *\n * Example:\n *\n *     <!-- Show a help popup at start, or if user presses \"H\" -->\n *     <div id=\"impress-help\"></div>\n *\n * For developers:\n *\n * Typical use for this plugin, is for plugins that support some keypress, to add a line\n * to the help popup produced by this plugin. For example \"P: Presenter console\".\n *\n * Copyright 2016 Henrik Ingo (@henrikingo)\n * Released under the MIT license.\n */\n/* global window, document */\n\n( function( document, window ) {\n    \"use strict\";\n    var rows = [];\n    var timeoutHandle;\n\n    var triggerEvent = function( el, eventName, detail ) {\n        var event = document.createEvent( \"CustomEvent\" );\n        event.initCustomEvent( eventName, true, true, detail );\n        el.dispatchEvent( event );\n    };\n\n    var renderHelpDiv = function() {\n        var helpDiv = document.getElementById( \"impress-help\" );\n        if ( helpDiv ) {\n            var html = [];\n            for ( var row in rows ) {\n                for ( var arrayItem in row ) {\n                    html.push( rows[ row ][ arrayItem ] );\n                }\n            }\n            if ( html ) {\n                helpDiv.innerHTML = \"<table>\\n\" + html.join( \"\\n\" ) + \"</table>\\n\";\n            }\n        }\n    };\n\n    var toggleHelp = function() {\n        var helpDiv = document.getElementById( \"impress-help\" );\n        if ( !helpDiv ) {\n            return;\n        }\n\n        if ( helpDiv.style.display === \"block\" ) {\n            helpDiv.style.display = \"none\";\n        } else {\n            helpDiv.style.display = \"block\";\n            window.clearTimeout( timeoutHandle );\n        }\n    };\n\n    document.addEventListener( \"keyup\", function( event ) {\n\n        if ( event.keyCode === 72 || event.keyCode === 191 ) { // \"h\" || \"?\"\n            event.preventDefault();\n            toggleHelp();\n        }\n    }, false );\n\n    // API\n    // Other plugins can add help texts, typically if they support an action on a keypress.\n    /**\n     * Add a help text to the help popup.\n     *\n     * :param: e.detail.command  Example: \"H\"\n     * :param: e.detail.text     Example: \"Show this help.\"\n     * :param: e.detail.row      Row index from 0 to 9 where to place this help text. Example: 0\n     */\n    document.addEventListener( \"impress:help:add\", function( e ) {\n\n        // The idea is for the sender of the event to supply a unique row index, used for sorting.\n        // But just in case two plugins would ever use the same row index, we wrap each row into\n        // its own array. If there are more than one entry for the same index, they are shown in\n        // first come, first serve ordering.\n        var rowIndex = e.detail.row;\n        if ( typeof rows[ rowIndex ] !== \"object\" || !rows[ rowIndex ].isArray ) {\n            rows[ rowIndex ] = [];\n        }\n        rows[ e.detail.row ].push( \"<tr><td><strong>\" + e.detail.command + \"</strong></td><td>\" +\n                                   e.detail.text + \"</td></tr>\" );\n        renderHelpDiv();\n    } );\n\n    document.addEventListener( \"impress:init\", function( e ) {\n        renderHelpDiv();\n\n        // At start, show the help for 7 seconds.\n        var helpDiv = document.getElementById( \"impress-help\" );\n        if ( helpDiv ) {\n            helpDiv.style.display = \"block\";\n            timeoutHandle = window.setTimeout( function() {\n                var helpDiv = document.getElementById( \"impress-help\" );\n                helpDiv.style.display = \"none\";\n            }, 7000 );\n\n            // Regster callback to empty the help div on teardown\n            var api = e.detail.api;\n            api.lib.gc.pushCallback( function() {\n                window.clearTimeout( timeoutHandle );\n                helpDiv.style.display = \"\";\n                helpDiv.innerHTML = \"\";\n                rows = [];\n            } );\n        }\n\n        // Use our own API to register the help text for \"h\"\n        triggerEvent( document, \"impress:help:add\",\n                      { command: \"H\", text: \"Show this help\", row: 0 } );\n    } );\n\n} )( document, window );\n\n\n/**\n * Adds a presenter console to impress.js\n *\n * MIT Licensed, see license.txt.\n *\n * Copyright 2012, 2013, 2015 impress-console contributors (see README.txt)\n *\n * version: 1.3-dev\n *\n */\n\n// This file contains so much HTML, that we will just respectfully disagree about js\n/* jshint quotmark:single */\n/* global navigator, top, setInterval, clearInterval, document, window */\n\n( function( document, window ) {\n    'use strict';\n\n    // TODO: Move this to src/lib/util.js\n    var triggerEvent = function( el, eventName, detail ) {\n        var event = document.createEvent( 'CustomEvent' );\n        event.initCustomEvent( eventName, true, true, detail );\n        el.dispatchEvent( event );\n    };\n\n    // Create Language object depending on browsers language setting\n    var lang;\n    switch ( navigator.language ) {\n    case 'de':\n        lang = {\n            'noNotes': '<div class=\"noNotes\">Keine Notizen hierzu</div>',\n            'restart': 'Neustart',\n            'clickToOpen': 'Klicken um Sprecherkonsole zu ffnen',\n            'prev': 'zurck',\n            'next': 'weiter',\n            'loading': 'initalisiere',\n            'ready': 'Bereit',\n            'moving': 'in Bewegung',\n            'useAMPM': false\n        };\n        break;\n    case 'zh-CN':\n    case 'zh-cn':\n        lang = {\n            'noNotes': '<div class=\"noNotes\"></div>',\n            'restart': '',\n            'clickToOpen': '',\n            'prev': '',\n            'next': '',\n            'loading': '',\n            'ready': '',\n            'moving': '',\n            'useAMPM': false\n        };\n        break;\n    case 'en': // jshint ignore:line\n    default : // jshint ignore:line\n        lang = {\n            'noNotes': '<div class=\"noNotes\">No notes for this step</div>',\n            'restart': 'Restart',\n            'clickToOpen': 'Click to open speaker console',\n            'prev': 'Prev',\n            'next': 'Next',\n            'loading': 'Loading',\n            'ready': 'Ready',\n            'moving': 'Moving',\n            'useAMPM': false\n        };\n        break;\n    }\n\n    // Settings to set iframe in speaker console\n    const preViewDefaultFactor = 0.7;\n    const preViewMinimumFactor = 0.5;\n    const preViewGap    = 4;\n\n    // This is the default template for the speaker console window\n    const consoleTemplate = '<!DOCTYPE html>' +\n        '<html id=\"impressconsole\"><head>' +\n\n          // Order is important: If user provides a cssFile, those will win, because they're later\n          '{{cssStyle}}' +\n          '{{cssLink}}' +\n        '</head><body>' +\n        '<div id=\"console\">' +\n          '<div id=\"views\">' +\n            '<iframe id=\"slideView\" scrolling=\"no\"></iframe>' +\n            '<iframe id=\"preView\" scrolling=\"no\"></iframe>' +\n            '<div id=\"blocker\"></div>' +\n          '</div>' +\n          '<div id=\"notes\"></div>' +\n        '</div>' +\n        '<div id=\"controls\"> ' +\n          '<div id=\"prev\"><a  href=\"#\" onclick=\"impress().prev(); return false;\" />' +\n            '{{prev}}</a></div>' +\n          '<div id=\"next\"><a  href=\"#\" onclick=\"impress().next(); return false;\" />' +\n            '{{next}}</a></div>' +\n          '<div id=\"clock\">--:--</div>' +\n          '<div id=\"timer\" onclick=\"timerReset()\">00m 00s</div>' +\n          '<div id=\"status\">{{loading}}</div>' +\n        '</div>' +\n        '</body></html>';\n\n    // Default css location\n    var cssFileOldDefault = 'css/impressConsole.css';\n    var cssFile = undefined; // jshint ignore:line\n\n    // Css for styling iframs on the console\n    var cssFileIframeOldDefault = 'css/iframe.css';\n    var cssFileIframe = undefined; // jshint ignore:line\n\n    // All console windows, so that you can call impressConsole() repeatedly.\n    var allConsoles = {};\n\n    // Zero padding helper function:\n    var zeroPad = function( i ) {\n        return ( i < 10 ? '0' : '' ) + i;\n    };\n\n    // The console object\n    var impressConsole = window.impressConsole = function( rootId ) {\n\n        rootId = rootId || 'impress';\n\n        if ( allConsoles[ rootId ] ) {\n            return allConsoles[ rootId ];\n        }\n\n        // Root presentation elements\n        var root = document.getElementById( rootId );\n\n        var consoleWindow = null;\n\n        var nextStep = function() {\n            var classes = '';\n            var nextElement = document.querySelector( '.active' );\n\n            // Return to parents as long as there is no next sibling\n            while ( !nextElement.nextElementSibling && nextElement.parentNode ) {\n                nextElement = nextElement.parentNode;\n            }\n            nextElement = nextElement.nextElementSibling;\n            while ( nextElement ) {\n                classes = nextElement.attributes[ 'class' ];\n                if ( classes && classes.value.indexOf( 'step' ) !== -1 ) {\n                    consoleWindow.document.getElementById( 'blocker' ).innerHTML = lang.next;\n                    return nextElement;\n                }\n\n                if ( nextElement.firstElementChild ) { // First go into deep\n                    nextElement = nextElement.firstElementChild;\n                } else {\n\n                    // Go to next sibling or through parents until there is a next sibling\n                    while ( !nextElement.nextElementSibling && nextElement.parentNode ) {\n                        nextElement = nextElement.parentNode;\n                    }\n                    nextElement = nextElement.nextElementSibling;\n                }\n            }\n\n            // No next element. Pick the first\n            consoleWindow.document.getElementById( 'blocker' ).innerHTML = lang.restart;\n            return document.querySelector( '.step' );\n        };\n\n        // Sync the notes to the step\n        var onStepLeave = function() {\n            if ( consoleWindow ) {\n\n                // Set notes to next steps notes.\n                var newNotes = document.querySelector( '.active' ).querySelector( '.notes' );\n                if ( newNotes ) {\n                    newNotes = newNotes.innerHTML;\n                } else {\n                    newNotes = lang.noNotes;\n                }\n                consoleWindow.document.getElementById( 'notes' ).innerHTML = newNotes;\n\n                // Set the views\n                var baseURL = document.URL.substring( 0, document.URL.search( '#/' ) );\n                var slideSrc = baseURL + '#' + document.querySelector( '.active' ).id;\n                var preSrc = baseURL + '#' + nextStep().id;\n                var slideView = consoleWindow.document.getElementById( 'slideView' );\n\n                // Setting when already set causes glitches in Firefox, so check first:\n                if ( slideView.src !== slideSrc ) {\n                    slideView.src = slideSrc;\n                }\n                var preView = consoleWindow.document.getElementById( 'preView' );\n                if ( preView.src !== preSrc ) {\n                    preView.src = preSrc;\n                }\n\n                consoleWindow.document.getElementById( 'status' ).innerHTML =\n                    '<span class=\"moving\">' + lang.moving + '</span>';\n            }\n        };\n\n        // Sync the previews to the step\n        var onStepEnter = function() {\n            if ( consoleWindow ) {\n\n                // We do everything here again, because if you stopped the previos step to\n                // early, the onstepleave trigger is not called for that step, so\n                // we need this to sync things.\n                var newNotes = document.querySelector( '.active' ).querySelector( '.notes' );\n                if ( newNotes ) {\n                    newNotes = newNotes.innerHTML;\n                } else {\n                    newNotes = lang.noNotes;\n                }\n                var notes = consoleWindow.document.getElementById( 'notes' );\n                notes.innerHTML = newNotes;\n                notes.scrollTop = 0;\n\n                // Set the views\n                var baseURL = document.URL.substring( 0, document.URL.search( '#/' ) );\n                var slideSrc = baseURL + '#' + document.querySelector( '.active' ).id;\n                var preSrc = baseURL + '#' + nextStep().id;\n                var slideView = consoleWindow.document.getElementById( 'slideView' );\n\n                // Setting when already set causes glitches in Firefox, so check first:\n                if ( slideView.src !== slideSrc ) {\n                    slideView.src = slideSrc;\n                }\n                var preView = consoleWindow.document.getElementById( 'preView' );\n                if ( preView.src !== preSrc ) {\n                    preView.src = preSrc;\n                }\n\n                consoleWindow.document.getElementById( 'status' ).innerHTML =\n                    '<span  class=\"ready\">' + lang.ready + '</span>';\n            }\n        };\n\n        // Sync substeps\n        var onSubstep = function( event ) {\n            if ( consoleWindow ) {\n                if ( event.detail.reason === 'next' ) {\n                    onSubstepShow();\n                }\n                if ( event.detail.reason === 'prev' ) {\n                    onSubstepHide();\n                }\n            }\n        };\n\n        var onSubstepShow = function() {\n            var slideView = consoleWindow.document.getElementById( 'slideView' );\n            triggerEventInView( slideView, 'impress:substep:show' );\n        };\n\n        var onSubstepHide = function() {\n            var slideView = consoleWindow.document.getElementById( 'slideView' );\n            triggerEventInView( slideView, 'impress:substep:hide' );\n        };\n\n        var triggerEventInView = function( frame, eventName, detail ) {\n\n            // Note: Unfortunately Chrome does not allow createEvent on file:// URLs, so this won't\n            // work. This does work on Firefox, and should work if viewing the presentation on a\n            // http:// URL on Chrome.\n            var event = frame.contentDocument.createEvent( 'CustomEvent' );\n            event.initCustomEvent( eventName, true, true, detail );\n            frame.contentDocument.dispatchEvent( event );\n        };\n\n        var spaceHandler = function() {\n            var notes = consoleWindow.document.getElementById( 'notes' );\n            if ( notes.scrollTopMax - notes.scrollTop > 20 ) {\n               notes.scrollTop = notes.scrollTop + notes.clientHeight * 0.8;\n            } else {\n               window.impress().next();\n            }\n        };\n\n        var timerReset = function() {\n            consoleWindow.timerStart = new Date();\n        };\n\n        // Show a clock\n        var clockTick = function() {\n            var now = new Date();\n            var hours = now.getHours();\n            var minutes = now.getMinutes();\n            var seconds = now.getSeconds();\n            var ampm = '';\n\n            if ( lang.useAMPM ) {\n                ampm = ( hours < 12 ) ? 'AM' : 'PM';\n                hours = ( hours > 12 ) ? hours - 12 : hours;\n                hours = ( hours === 0 ) ? 12 : hours;\n            }\n\n            // Clock\n            var clockStr = zeroPad( hours ) + ':' + zeroPad( minutes ) + ':' + zeroPad( seconds ) +\n                           ' ' + ampm;\n            consoleWindow.document.getElementById( 'clock' ).firstChild.nodeValue = clockStr;\n\n            // Timer\n            seconds = Math.floor( ( now - consoleWindow.timerStart ) / 1000 );\n            minutes = Math.floor( seconds / 60 );\n            seconds = Math.floor( seconds % 60 );\n            consoleWindow.document.getElementById( 'timer' ).firstChild.nodeValue =\n                zeroPad( minutes ) + 'm ' + zeroPad( seconds ) + 's';\n\n            if ( !consoleWindow.initialized ) {\n\n                // Nudge the slide windows after load, or they will scrolled wrong on Firefox.\n                consoleWindow.document.getElementById( 'slideView' ).contentWindow.scrollTo( 0, 0 );\n                consoleWindow.document.getElementById( 'preView' ).contentWindow.scrollTo( 0, 0 );\n                consoleWindow.initialized = true;\n            }\n        };\n\n        var registerKeyEvent = function( keyCodes, handler, window ) {\n            if ( window === undefined ) {\n                window = consoleWindow;\n            }\n\n            // Prevent default keydown action when one of supported key is pressed\n            window.document.addEventListener( 'keydown', function( event ) {\n                if ( !event.ctrlKey && !event.altKey && !event.shiftKey && !event.metaKey &&\n                     keyCodes.indexOf( event.keyCode ) !== -1 ) {\n                    event.preventDefault();\n                }\n            }, false );\n\n            // Trigger impress action on keyup\n            window.document.addEventListener( 'keyup', function( event ) {\n                if ( !event.ctrlKey && !event.altKey && !event.shiftKey && !event.metaKey &&\n                     keyCodes.indexOf( event.keyCode ) !== -1 ) {\n                        handler();\n                        event.preventDefault();\n                }\n            }, false );\n        };\n\n        var consoleOnLoad = function() {\n                var slideView = consoleWindow.document.getElementById( 'slideView' );\n                var preView = consoleWindow.document.getElementById( 'preView' );\n\n                // Firefox:\n                slideView.contentDocument.body.classList.add( 'impress-console' );\n                preView.contentDocument.body.classList.add( 'impress-console' );\n                if ( cssFileIframe !== undefined ) {\n                    slideView.contentDocument.head.insertAdjacentHTML(\n                        'beforeend',\n                        '<link rel=\"stylesheet\" type=\"text/css\" href=\"' + cssFileIframe + '\">'\n                    );\n                    preView.contentDocument.head.insertAdjacentHTML(\n                        'beforeend',\n                        '<link rel=\"stylesheet\" type=\"text/css\" href=\"' + cssFileIframe + '\">'\n                    );\n                }\n\n                // Chrome:\n                slideView.addEventListener( 'load', function() {\n                        slideView.contentDocument.body.classList.add( 'impress-console' );\n                        if ( cssFileIframe !== undefined ) {\n                            slideView.contentDocument.head.insertAdjacentHTML(\n                                'beforeend',\n                                '<link rel=\"stylesheet\" type=\"text/css\" href=\"' +\n                                    cssFileIframe + '\">'\n                            );\n                        }\n                } );\n                preView.addEventListener( 'load', function() {\n                        preView.contentDocument.body.classList.add( 'impress-console' );\n                        if ( cssFileIframe !== undefined ) {\n                            preView.contentDocument.head.insertAdjacentHTML(\n                                'beforeend',\n                                '<link rel=\"stylesheet\" type=\"text/css\" href=\"' +\n                                    cssFileIframe + '\">' );\n                        }\n                } );\n        };\n\n        var open = function() {\n            if ( top.isconsoleWindow ) {\n                return;\n            }\n\n            if ( consoleWindow && !consoleWindow.closed ) {\n                consoleWindow.focus();\n            } else {\n                consoleWindow = window.open( '', 'impressConsole' );\n\n                // If opening failes this may be because the browser prevents this from\n                // not (or less) interactive JavaScript...\n                if ( consoleWindow == null ) {\n\n                    // ... so I add a button to klick.\n                    // workaround on firefox\n                    var message = document.createElement( 'div' );\n                    message.id = 'impress-console-button';\n                    message.style.position = 'fixed';\n                    message.style.left = 0;\n                    message.style.top = 0;\n                    message.style.right = 0;\n                    message.style.bottom = 0;\n                    message.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';\n                    var clickStr = 'var x = document.getElementById(\\'impress-console-button\\');' +\n                                     'x.parentNode.removeChild(x);' +\n                                     'var r = document.getElementById(\\'' + rootId + '\\');' +\n                                     'impress(\\'' + rootId +\n                                     '\\').lib.util.triggerEvent(r, \\'impress:console:open\\', {})';\n                    var styleStr = 'margin: 25vh 25vw;width:50vw;height:50vh;';\n                    message.innerHTML = '<button style=\"' + styleStr + '\" ' +\n                                                 'onclick=\"' + clickStr + '\">' +\n                                        lang.clickToOpen +\n                                        '</button>';\n                    document.body.appendChild( message );\n                    return;\n                }\n\n                var cssLink = '';\n                if ( cssFile !== undefined ) {\n                    cssLink = '<link rel=\"stylesheet\" type=\"text/css\" media=\"screen\" href=\"' +\n                              cssFile + '\">';\n                }\n\n                // This sets the window location to the main window location, so css can be loaded:\n                consoleWindow.document.open();\n\n                // Write the template:\n                consoleWindow.document.write(\n\n                    // CssStyleStr is lots of inline <style></style> defined at the end of this file\n                    consoleTemplate.replace( '{{cssStyle}}', cssStyleStr() )\n                                   .replace( '{{cssLink}}', cssLink )\n                                   .replace( /{{.*?}}/gi, function( x ) {\n                                       return lang[ x.substring( 2, x.length - 2 ) ]; }\n                                   )\n                );\n                consoleWindow.document.title = 'Speaker Console (' + document.title + ')';\n                consoleWindow.impress = window.impress;\n\n                // We set this flag so we can detect it later, to prevent infinite popups.\n                consoleWindow.isconsoleWindow = true;\n\n                // Set the onload function:\n                consoleWindow.onload = consoleOnLoad;\n\n                // Add clock tick\n                consoleWindow.timerStart = new Date();\n                consoleWindow.timerReset = timerReset;\n                consoleWindow.clockInterval = setInterval( allConsoles[ rootId ].clockTick, 1000 );\n\n                // Keyboard navigation handlers\n                // 33: pg up, 37: left, 38: up\n                registerKeyEvent( [ 33, 37, 38 ], window.impress().prev );\n\n                // 34: pg down, 39: right, 40: down\n                registerKeyEvent( [ 34, 39, 40 ], window.impress().next );\n\n                // 32: space\n                registerKeyEvent( [ 32 ], spaceHandler );\n\n                // 82: R\n                registerKeyEvent( [ 82 ], timerReset );\n\n                // Cleanup\n                consoleWindow.onbeforeunload = function() {\n\n                    // I don't know why onunload doesn't work here.\n                    clearInterval( consoleWindow.clockInterval );\n                };\n\n                // It will need a little nudge on Firefox, but only after loading:\n                onStepEnter();\n                consoleWindow.initialized = false;\n                consoleWindow.document.close();\n\n                //Catch any window resize to pass size on\n                window.onresize = resize;\n                consoleWindow.onresize = resize;\n\n                return consoleWindow;\n            }\n        };\n\n        var resize = function() {\n            var slideView = consoleWindow.document.getElementById( 'slideView' );\n            var preView = consoleWindow.document.getElementById( 'preView' );\n\n            // Get ratio of presentation\n            var ratio = window.innerHeight / window.innerWidth;\n\n            // Get size available for views\n            var views = consoleWindow.document.getElementById( 'views' );\n\n            // SlideView may have a border or some padding:\n            // asuming same border width on both direktions\n            var delta = slideView.offsetWidth - slideView.clientWidth;\n\n            // Set views\n            var slideViewWidth = ( views.clientWidth - delta );\n            var slideViewHeight = Math.floor( slideViewWidth * ratio );\n\n            var preViewTop = slideViewHeight + preViewGap;\n\n            var preViewWidth = Math.floor( slideViewWidth * preViewDefaultFactor );\n            var preViewHeight = Math.floor( slideViewHeight * preViewDefaultFactor );\n\n            // Shrink preview to fit into space available\n            if ( views.clientHeight - delta < preViewTop + preViewHeight ) {\n                preViewHeight = views.clientHeight - delta - preViewTop;\n                preViewWidth = Math.floor( preViewHeight / ratio );\n            }\n\n            // If preview is not high enough forget ratios!\n            if ( preViewWidth <= Math.floor( slideViewWidth * preViewMinimumFactor ) ) {\n                slideViewWidth = ( views.clientWidth - delta );\n                slideViewHeight = Math.floor( ( views.clientHeight - delta - preViewGap ) /\n                                             ( 1 + preViewMinimumFactor ) );\n\n                preViewTop = slideViewHeight + preViewGap;\n\n                preViewWidth = Math.floor( slideViewWidth * preViewMinimumFactor );\n                preViewHeight = views.clientHeight - delta - preViewTop;\n            }\n\n            // Set the calculated into styles\n            slideView.style.width = slideViewWidth + 'px';\n            slideView.style.height = slideViewHeight + 'px';\n\n            preView.style.top = preViewTop + 'px';\n\n            preView.style.width = preViewWidth + 'px';\n            preView.style.height = preViewHeight + 'px';\n        };\n\n        var _init = function( cssConsole, cssIframe ) {\n            if ( cssConsole !== undefined ) {\n                cssFile = cssConsole;\n            }\n\n            // You can also specify the css in the presentation root div:\n            // <div id=\"impress\" data-console-css=...\" data-console-css-iframe=\"...\">\n            else if ( root.dataset.consoleCss !== undefined ) {\n                cssFile = root.dataset.consoleCss;\n            }\n\n            if ( cssIframe !== undefined ) {\n                cssFileIframe = cssIframe;\n            } else if ( root.dataset.consoleCssIframe !== undefined ) {\n                cssFileIframe = root.dataset.consoleCssIframe;\n            }\n\n            // Register the event\n            root.addEventListener( 'impress:stepleave', onStepLeave );\n            root.addEventListener( 'impress:stepenter', onStepEnter );\n            root.addEventListener( 'impress:substep:stepleaveaborted', onSubstep );\n            root.addEventListener( 'impress:substep:show', onSubstepShow );\n            root.addEventListener( 'impress:substep:hide', onSubstepHide );\n\n            //When the window closes, clean up after ourselves.\n            window.onunload = function() {\n                if ( consoleWindow && !consoleWindow.closed ) {\n                    consoleWindow.close();\n                }\n            };\n\n            //Open speaker console when they press 'p'\n            registerKeyEvent( [ 80 ], open, window );\n\n            //Btw, you can also launch console automatically:\n            //<div id=\"impress\" data-console-autolaunch=\"true\">\n            if ( root.dataset.consoleAutolaunch === 'true' ) {\n                open();\n            }\n        };\n\n        var init = function( cssConsole, cssIframe ) {\n            if ( ( cssConsole === undefined || cssConsole === cssFileOldDefault ) &&\n                 ( cssIframe === undefined  || cssIframe === cssFileIframeOldDefault ) ) {\n                window.console.log( 'impressConsole().init() is deprecated. ' +\n                                   'impressConsole is now initialized automatically when you ' +\n                                   'call impress().init().' );\n            }\n            _init( cssConsole, cssIframe );\n        };\n\n        // New API for impress.js plugins is based on using events\n        root.addEventListener( 'impress:console:open', function() {\n            open();\n        } );\n\n        /**\n         * Register a key code to an event handler\n         *\n         * :param: event.detail.keyCodes    List of key codes\n         * :param: event.detail.handler     A function registered as the event handler\n         * :param: event.detail.window      The console window to register the keycode in\n         */\n        root.addEventListener( 'impress:console:registerKeyEvent', function( event ) {\n            registerKeyEvent( event.detail.keyCodes, event.detail.handler, event.detail.window );\n        } );\n\n        // Return the object\n        allConsoles[ rootId ] = { init: init, open: open, clockTick: clockTick,\n                               registerKeyEvent: registerKeyEvent, _init: _init };\n        return allConsoles[ rootId ];\n\n    };\n\n    // This initializes impressConsole automatically when initializing impress itself\n    document.addEventListener( 'impress:init', function( event ) {\n\n        // Note: impressConsole wants the id string, not the DOM element directly\n        impressConsole( event.target.id )._init();\n\n        // Add 'P' to the help popup\n        triggerEvent( document, 'impress:help:add',\n                        { command: 'P', text: 'Presenter console', row: 10 } );\n    } );\n\n    // Returns a string to be used inline as a css <style> element in the console window.\n    // Apologies for length, but hiding it here at the end to keep it away from rest of the code.\n    var cssStyleStr = function() {\n        return `<style>\n            #impressconsole body {\n                background-color: rgb(255, 255, 255);\n                padding: 0;\n                margin: 0;\n                font-family: verdana, arial, sans-serif;\n                font-size: 2vw;\n            }\n\n            #impressconsole div#console {\n                position: absolute;\n                top: 0.5vw;\n                left: 0.5vw;\n                right: 0.5vw;\n                bottom: 3vw;\n                margin: 0;\n            }\n\n            #impressconsole div#views, #impressconsole div#notes {\n                position: absolute;\n                top: 0;\n                bottom: 0;\n            }\n\n            #impressconsole div#views {\n                left: 0;\n                right: 50vw;\n                overflow: hidden;\n            }\n\n            #impressconsole div#blocker {\n                position: absolute;\n                right: 0;\n                bottom: 0;\n            }\n\n            #impressconsole div#notes {\n                left: 50vw;\n                right: 0;\n                overflow-x: hidden;\n                overflow-y: auto;\n                padding: 0.3ex;\n                background-color: rgb(255, 255, 255);\n                border: solid 1px rgb(120, 120, 120);\n            }\n\n            #impressconsole div#notes .noNotes {\n                color: rgb(200, 200, 200);\n            }\n\n            #impressconsole div#notes p {\n                margin-top: 0;\n            }\n\n            #impressconsole iframe {\n                position: absolute;\n                margin: 0;\n                padding: 0;\n                left: 0;\n                border: solid 1px rgb(120, 120, 120);\n            }\n\n            #impressconsole iframe#slideView {\n                top: 0;\n                width: 49vw;\n                height: 49vh;\n            }\n\n            #impressconsole iframe#preView {\n                opacity: 0.7;\n                top: 50vh;\n                width: 30vw;\n                height: 30vh;\n            }\n\n            #impressconsole div#controls {\n                margin: 0;\n                position: absolute;\n                bottom: 0.25vw;\n                left: 0.5vw;\n                right: 0.5vw;\n                height: 2.5vw;\n                background-color: rgb(255, 255, 255);\n                background-color: rgba(255, 255, 255, 0.6);\n            }\n\n            #impressconsole div#prev, div#next {\n            }\n\n            #impressconsole div#prev a, #impressconsole div#next a {\n                display: block;\n                border: solid 1px rgb(70, 70, 70);\n                border-radius: 0.5vw;\n                font-size: 1.5vw;\n                padding: 0.25vw;\n                text-decoration: none;\n                background-color: rgb(220, 220, 220);\n                color: rgb(0, 0, 0);\n            }\n\n            #impressconsole div#prev a:hover, #impressconsole div#next a:hover {\n                background-color: rgb(245, 245, 245);\n            }\n\n            #impressconsole div#prev {\n                float: left;\n            }\n\n            #impressconsole div#next {\n                float: right;\n            }\n\n            #impressconsole div#status {\n                margin-left: 2em;\n                margin-right: 2em;\n                text-align: center;\n                float: right;\n            }\n\n            #impressconsole div#clock {\n                margin-left: 2em;\n                margin-right: 2em;\n                text-align: center;\n                float: left;\n            }\n\n            #impressconsole div#timer {\n                margin-left: 2em;\n                margin-right: 2em;\n                text-align: center;\n                float: left;\n            }\n\n            #impressconsole span.moving {\n                color: rgb(255, 0, 0);\n            }\n\n            #impressconsole span.ready {\n                color: rgb(0, 128, 0);\n            }\n        </style>`;\n    };\n\n} )( document, window );\n\n/**\n * Media Plugin\n *\n * This plugin will do the following things:\n *\n *  - Add a special class when playing (body.impress-media-video-playing\n *    and body.impress-media-video-playing) and pausing media (body.impress-media-video-paused\n *    and body.impress-media-audio-paused) (removing them when ending).\n *    This can be useful for example for darkening the background or fading out other elements\n *    while a video is playing.\n *    Only media at the current step are taken into account. All classes are removed when leaving\n *    a step.\n *\n *  - Introduce the following new data attributes:\n *\n *    - data-media-autoplay=\"true\": Autostart media when entering its step.\n *    - data-media-autostop=\"true\": Stop media (= pause and reset to start), when leaving its\n *      step.\n *    - data-media-autopause=\"true\": Pause media but keep current time when leaving its step.\n *\n *    When these attributes are added to a step they are inherited by all media on this step.\n *    Of course this setting can be overwritten by adding different attributes to inidvidual\n *    media.\n *\n *    The same rule applies when this attributes is added to the root element. Settings can be\n *    overwritten for individual steps and media.\n *\n *    Examples:\n *    - data-media-autoplay=\"true\" data-media-autostop=\"true\": start media on enter, stop on\n *      leave, restart from beginning when re-entering the step.\n *\n *    - data-media-autoplay=\"true\" data-media-autopause=\"true\": start media on enter, pause on\n *      leave, resume on re-enter\n *\n *    - data-media-autoplay=\"true\" data-media-autostop=\"true\" data-media-autopause=\"true\": start\n *      media on enter, stop on leave (stop overwrites pause).\n *\n *    - data-media-autoplay=\"true\" data-media-autopause=\"false\": let media start automatically\n *      when entering a step and let it play when leaving the step.\n *\n *    - <div id=\"impress\" data-media-autoplay=\"true\"> ... <div class=\"step\"\n *      data-media-autoplay=\"false\">\n *      All media is startet automatically on all steps except the one that has the\n *      data-media-autoplay=\"false\" attribute.\n *\n *  - Pro tip: Use <audio onended=\"impress().next()\"> or <video onended=\"impress().next()\"> to\n *    proceed to the next step automatically, when the end of the media is reached.\n *\n *\n * Copyright 2018 Holger Teichert (@complanar)\n * Released under the MIT license.\n */\n/* global window, document */\n\n( function( document, window ) {\n    \"use strict\";\n    var root, api, gc, attributeTracker;\n\n    attributeTracker = [];\n\n    // Function names\n    var enhanceMediaNodes,\n        enhanceMedia,\n        removeMediaClasses,\n        onStepenterDetectImpressConsole,\n        onStepenter,\n        onStepleave,\n        onPlay,\n        onPause,\n        onEnded,\n        getMediaAttribute,\n        teardown;\n\n    document.addEventListener( \"impress:init\", function( event ) {\n        root = event.target;\n        api = event.detail.api;\n        gc = api.lib.gc;\n\n        enhanceMedia();\n\n        gc.pushCallback( teardown );\n    }, false );\n\n    teardown = function() {\n        var el, i;\n        removeMediaClasses();\n        for ( i = 0; i < attributeTracker.length; i += 1 ) {\n            el = attributeTracker[ i ];\n            el.node.removeAttribute( el.attr );\n        }\n        attributeTracker = [];\n    };\n\n    getMediaAttribute = function( attributeName, nodes ) {\n        var attrName, attrValue, i, node;\n        attrName = \"data-media-\" + attributeName;\n\n        // Look for attributes in all nodes\n        for ( i = 0; i < nodes.length; i += 1 ) {\n            node = nodes[ i ];\n\n            // First test, if the attribute exists, because some browsers may return\n            // an empty string for non-existing attributes - specs are not clear at that point\n            if ( node.hasAttribute( attrName ) ) {\n\n                // Attribute found, return their parsed boolean value, empty strings count as true\n                // to enable empty value booleans (common in html5 but not allowed in well formed\n                // xml).\n                attrValue = node.getAttribute( attrName );\n                if ( attrValue === \"\" || attrValue === \"true\" ) {\n                    return true;\n                } else {\n                    return false;\n                }\n            }\n\n            // No attribute found at current node, proceed with next round\n        }\n\n        // Last resort: no attribute found - return undefined to distiguish from false\n        return undefined;\n    };\n\n    onPlay = function( event ) {\n        var type = event.target.nodeName.toLowerCase();\n        document.body.classList.add( \"impress-media-\" + type + \"-playing\" );\n        document.body.classList.remove( \"impress-media-\" + type + \"-paused\" );\n    };\n\n    onPause = function( event ) {\n        var type = event.target.nodeName.toLowerCase();\n        document.body.classList.add( \"impress-media-\" + type + \"-paused\" );\n        document.body.classList.remove( \"impress-media-\" + type + \"-playing\" );\n    };\n\n    onEnded = function( event ) {\n        var type = event.target.nodeName.toLowerCase();\n        document.body.classList.remove( \"impress-media-\" + type + \"-playing\" );\n        document.body.classList.remove( \"impress-media-\" + type + \"-paused\" );\n    };\n\n    removeMediaClasses = function() {\n        var type, types;\n        types = [ \"video\", \"audio\" ];\n        for ( type in types ) {\n            document.body.classList.remove( \"impress-media-\" + types[ type ] + \"-playing\" );\n            document.body.classList.remove( \"impress-media-\" + types[ type ] + \"-paused\" );\n        }\n    };\n\n    enhanceMediaNodes = function() {\n        var i, id, media, mediaElement, type;\n\n        media = root.querySelectorAll( \"audio, video\" );\n        for ( i = 0; i < media.length; i += 1 ) {\n            type = media[ i ].nodeName.toLowerCase();\n\n            // Set an id to identify each media node - used e.g. for cross references by\n            // the consoleMedia plugin\n            mediaElement = media[ i ];\n            id = mediaElement.getAttribute( \"id\" );\n            if ( id === undefined || id === null ) {\n                mediaElement.setAttribute( \"id\", \"media-\" + type + \"-\" + i );\n                attributeTracker.push( { \"node\": mediaElement, \"attr\": \"id\" } );\n            }\n            gc.addEventListener( mediaElement, \"play\", onPlay );\n            gc.addEventListener( mediaElement, \"playing\", onPlay );\n            gc.addEventListener( mediaElement, \"pause\", onPause );\n            gc.addEventListener( mediaElement, \"ended\", onEnded );\n        }\n    };\n\n    enhanceMedia = function() {\n        var steps, stepElement, i;\n        enhanceMediaNodes();\n        steps = document.getElementsByClassName( \"step\" );\n        for ( i = 0; i < steps.length; i += 1 ) {\n            stepElement = steps[ i ];\n\n            gc.addEventListener( stepElement, \"impress:stepenter\", onStepenter );\n            gc.addEventListener( stepElement, \"impress:stepleave\", onStepleave );\n        }\n    };\n\n    onStepenterDetectImpressConsole = function() {\n        return {\n            \"preview\": ( window.frameElement !== null && window.frameElement.id === \"preView\" ),\n            \"slideView\": ( window.frameElement !== null && window.frameElement.id === \"slideView\" )\n        };\n    };\n\n    onStepenter = function( event ) {\n        var stepElement, media, mediaElement, i, onConsole, autoplay;\n        if ( ( !event ) || ( !event.target ) ) {\n            return;\n        }\n\n        stepElement = event.target;\n        removeMediaClasses();\n\n        media = stepElement.querySelectorAll( \"audio, video\" );\n        for ( i = 0; i < media.length; i += 1 ) {\n            mediaElement = media[ i ];\n\n            // Autoplay when (maybe inherited) autoplay setting is true,\n            // but only if not on preview of the next step in impressConsole\n            onConsole = onStepenterDetectImpressConsole();\n            autoplay = getMediaAttribute( \"autoplay\", [ mediaElement, stepElement, root ] );\n            if ( autoplay && !onConsole.preview ) {\n                if ( onConsole.slideView ) {\n                    mediaElement.muted = true;\n                }\n                mediaElement.play();\n            }\n        }\n    };\n\n    onStepleave = function( event ) {\n        var stepElement, media, i, mediaElement, autoplay, autopause, autostop;\n        if ( ( !event || !event.target ) ) {\n            return;\n        }\n\n        stepElement = event.target;\n        media = event.target.querySelectorAll( \"audio, video\" );\n        for ( i = 0; i < media.length; i += 1 ) {\n            mediaElement = media[ i ];\n\n            autoplay = getMediaAttribute( \"autoplay\", [ mediaElement, stepElement, root ] );\n            autopause = getMediaAttribute( \"autopause\", [ mediaElement, stepElement, root ] );\n            autostop = getMediaAttribute( \"autostop\",  [ mediaElement, stepElement, root ] );\n\n            // If both autostop and autopause are undefined, set it to the value of autoplay\n            if ( autostop === undefined && autopause === undefined ) {\n                autostop = autoplay;\n            }\n\n            if ( autopause || autostop ) {\n                mediaElement.pause();\n                if ( autostop ) {\n                    mediaElement.currentTime = 0;\n                }\n            }\n        }\n        removeMediaClasses();\n    };\n\n} )( document, window );\n\n/**\n * Mobile devices support\n *\n * Allow presentation creators to hide all but 3 slides, to save resources, particularly on mobile\n * devices, using classes body.impress-mobile, .step.prev, .step.active and .step.next.\n *\n * Note: This plugin does not take into account possible redirections done with skip, goto etc\n * plugins. Basically it wouldn't work as intended in such cases, but the active step will at least\n * be correct.\n *\n * Adapted to a plugin from a submission by @Kzeni:\n * https://github.com/impress/impress.js/issues/333\n */\n/* global document, navigator */\n( function( document ) {\n    \"use strict\";\n\n    var getNextStep = function( el ) {\n        var steps = document.querySelectorAll( \".step\" );\n        for ( var i = 0; i < steps.length; i++ ) {\n            if ( steps[ i ] === el ) {\n                if ( i + 1 < steps.length ) {\n                    return steps[ i + 1 ];\n                } else {\n                    return steps[ 0 ];\n                }\n            }\n        }\n    };\n    var getPrevStep = function( el ) {\n        var steps = document.querySelectorAll( \".step\" );\n        for ( var i = steps.length - 1; i >= 0; i-- ) {\n            if ( steps[ i ] === el ) {\n                if ( i - 1 >= 0 ) {\n                    return steps[ i - 1 ];\n                } else {\n                    return steps[ steps.length - 1 ];\n                }\n            }\n        }\n    };\n\n    // Detect mobile browsers & add CSS class as appropriate.\n    document.addEventListener( \"impress:init\", function( event ) {\n        var body = document.body;\n        if ( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n                 navigator.userAgent\n             ) ) {\n            body.classList.add( \"impress-mobile\" );\n        }\n\n        // Unset all this on teardown\n        var api = event.detail.api;\n        api.lib.gc.pushCallback( function() {\n            document.body.classList.remove( \"impress-mobile\" );\n            var prev = document.getElementsByClassName( \"prev\" )[ 0 ];\n            var next = document.getElementsByClassName( \"next\" )[ 0 ];\n            if ( typeof prev !== \"undefined\" ) {\n                prev.classList.remove( \"prev\" );\n            }\n            if ( typeof next !== \"undefined\" ) {\n                next.classList.remove( \"next\" );\n            }\n        } );\n    } );\n\n    // Add prev and next classes to the siblings of the newly entered active step element\n    // Remove prev and next classes from their current step elements\n    // Note: As an exception we break namespacing rules, as these are useful general purpose\n    // classes. (Naming rules would require us to use css classes mobile-next and mobile-prev,\n    // based on plugin name.)\n    document.addEventListener( \"impress:stepenter\", function( event ) {\n\t      var oldprev = document.getElementsByClassName( \"prev\" )[ 0 ];\n\t      var oldnext = document.getElementsByClassName( \"next\" )[ 0 ];\n\n\t      var prev = getPrevStep( event.target );\n\t      prev.classList.add( \"prev\" );\n\t      var next = getNextStep( event.target );\n\t      next.classList.add( \"next\" );\n\n\t      if ( typeof oldprev !== \"undefined\" ) {\n\t\t      oldprev.classList.remove( \"prev\" );\n              }\n\t      if ( typeof oldnext !== \"undefined\" ) {\n\t\t      oldnext.classList.remove( \"next\" );\n              }\n    } );\n} )( document );\n\n\n/**\n * Mouse timeout plugin\n *\n * After 3 seconds of mouse inactivity, add the css class\n * `body.impress-mouse-timeout`. On `mousemove`, `click` or `touch`, remove the\n * class.\n *\n * The use case for this plugin is to use CSS to hide elements from the screen\n * and only make them visible when the mouse is moved. Examples where this\n * might be used are: the toolbar from the toolbar plugin, and the mouse cursor\n * itself.\n *\n * Example CSS:\n *\n *     body.impress-mouse-timeout {\n *         cursor: none;\n *     }\n *     body.impress-mouse-timeout div#impress-toolbar {\n *         display: none;\n *     }\n *\n *\n * Copyright 2016 Henrik Ingo (@henrikingo)\n * Released under the MIT license.\n */\n/* global window, document */\n( function( document, window ) {\n    \"use strict\";\n    var timeout = 3;\n    var timeoutHandle;\n\n    var hide = function() {\n\n        // Mouse is now inactive\n        document.body.classList.add( \"impress-mouse-timeout\" );\n    };\n\n    var show = function() {\n        if ( timeoutHandle ) {\n            window.clearTimeout( timeoutHandle );\n        }\n\n        // Mouse is now active\n        document.body.classList.remove( \"impress-mouse-timeout\" );\n\n        // Then set new timeout after which it is considered inactive again\n        timeoutHandle = window.setTimeout( hide, timeout * 1000 );\n    };\n\n    document.addEventListener( \"impress:init\", function( event ) {\n        var api = event.detail.api;\n        var gc = api.lib.gc;\n        gc.addEventListener( document, \"mousemove\", show );\n        gc.addEventListener( document, \"click\", show );\n        gc.addEventListener( document, \"touch\", show );\n\n        // Set first timeout\n        show();\n\n        // Unset all this on teardown\n        gc.pushCallback( function() {\n            window.clearTimeout( timeoutHandle );\n            document.body.classList.remove( \"impress-mouse-timeout\" );\n        } );\n    }, false );\n\n} )( document, window );\n\n/**\n * Navigation events plugin\n *\n * As you can see this part is separate from the impress.js core code.\n * It's because these navigation actions only need what impress.js provides with\n * its simple API.\n *\n * This plugin is what we call an _init plugin_. It's a simple kind of\n * impress.js plugin. When loaded, it starts listening to the `impress:init`\n * event. That event listener initializes the plugin functionality - in this\n * case we listen to some keypress and mouse events. The only dependencies on\n * core impress.js functionality is the `impress:init` method, as well as using\n * the public api `next(), prev(),` etc when keys are pressed.\n *\n * Copyright 2011-2012 Bartek Szopka (@bartaz)\n * Released under the MIT license.\n * ------------------------------------------------\n *  author:  Bartek Szopka\n *  version: 0.5.3\n *  url:     http://bartaz.github.com/impress.js/\n *  source:  http://github.com/bartaz/impress.js/\n *\n */\n/* global document */\n( function( document ) {\n    \"use strict\";\n\n    // Wait for impress.js to be initialized\n    document.addEventListener( \"impress:init\", function( event ) {\n\n        // Getting API from event data.\n        // So you don't event need to know what is the id of the root element\n        // or anything. `impress:init` event data gives you everything you\n        // need to control the presentation that was just initialized.\n        var api = event.detail.api;\n        var gc = api.lib.gc;\n        var util = api.lib.util;\n\n        // Supported keys are:\n        // [space] - quite common in presentation software to move forward\n        // [up] [right] / [down] [left] - again common and natural addition,\n        // [pgdown] / [pgup] - often triggered by remote controllers,\n        // [tab] - this one is quite controversial, but the reason it ended up on\n        //   this list is quite an interesting story... Remember that strange part\n        //   in the impress.js code where window is scrolled to 0,0 on every presentation\n        //   step, because sometimes browser scrolls viewport because of the focused element?\n        //   Well, the [tab] key by default navigates around focusable elements, so clicking\n        //   it very often caused scrolling to focused element and breaking impress.js\n        //   positioning. I didn't want to just prevent this default action, so I used [tab]\n        //   as another way to moving to next step... And yes, I know that for the sake of\n        //   consistency I should add [shift+tab] as opposite action...\n        var isNavigationEvent = function( event ) {\n\n            // Don't trigger navigation for example when user returns to browser window with ALT+TAB\n            if ( event.altKey || event.ctrlKey || event.metaKey ) {\n                return false;\n            }\n\n            // In the case of TAB, we force step navigation always, overriding the browser\n            // navigation between input elements, buttons and links.\n            if ( event.keyCode === 9 ) {\n                return true;\n            }\n\n            // With the sole exception of TAB, we also ignore keys pressed if shift is down.\n            if ( event.shiftKey ) {\n                return false;\n            }\n\n            if ( ( event.keyCode >= 32 && event.keyCode <= 34 ) ||\n                 ( event.keyCode >= 37 && event.keyCode <= 40 ) ) {\n                return true;\n            }\n        };\n\n        // KEYBOARD NAVIGATION HANDLERS\n\n        // Prevent default keydown action when one of supported key is pressed.\n        gc.addEventListener( document, \"keydown\", function( event ) {\n            if ( isNavigationEvent( event ) ) {\n                event.preventDefault();\n            }\n        }, false );\n\n        // Trigger impress action (next or prev) on keyup.\n        gc.addEventListener( document, \"keyup\", function( event ) {\n            if ( isNavigationEvent( event ) ) {\n                if ( event.shiftKey ) {\n                    switch ( event.keyCode ) {\n                        case 9: // Shift+tab\n                            api.prev();\n                            break;\n                    }\n                } else {\n                    switch ( event.keyCode ) {\n                        case 33: // Pg up\n                        case 37: // Left\n                        case 38: // Up\n                                 api.prev( event );\n                                 break;\n                        case 9:  // Tab\n                        case 32: // Space\n                        case 34: // Pg down\n                        case 39: // Right\n                        case 40: // Down\n                                 api.next( event );\n                                 break;\n                    }\n                }\n                event.preventDefault();\n            }\n        }, false );\n\n        // Delegated handler for clicking on the links to presentation steps\n        gc.addEventListener( document, \"click\", function( event ) {\n\n            // Event delegation with \"bubbling\"\n            // check if event target (or any of its parents is a link)\n            var target = event.target;\n            try {\n                while ( ( target.tagName !== \"A\" ) &&\n                        ( target !== document.documentElement ) ) {\n                    target = target.parentNode;\n                }\n\n                if ( target.tagName === \"A\" ) {\n                    var href = target.getAttribute( \"href\" );\n\n                    // If it's a link to presentation step, target this step\n                    if ( href && href[ 0 ] === \"#\" ) {\n                        target = document.getElementById( href.slice( 1 ) );\n                    }\n                }\n\n                if ( api.goto( target ) ) {\n                    event.stopImmediatePropagation();\n                    event.preventDefault();\n                }\n            }\n            catch ( err ) {\n\n                // For example, when clicking on the button to launch speaker console, the button\n                // is immediately deleted from the DOM. In this case target is a DOM element when\n                // we get it, but turns out to be null if you try to actually do anything with it.\n                if ( err instanceof TypeError &&\n                     err.message === \"target is null\" ) {\n                    return;\n                }\n                throw err;\n            }\n        }, false );\n\n        // Delegated handler for clicking on step elements\n        gc.addEventListener( document, \"click\", function( event ) {\n            var target = event.target;\n            try {\n\n                // Find closest step element that is not active\n                while ( !( target.classList.contains( \"step\" ) &&\n                        !target.classList.contains( \"active\" ) ) &&\n                        ( target !== document.documentElement ) ) {\n                    target = target.parentNode;\n                }\n\n                if ( api.goto( target ) ) {\n                    event.preventDefault();\n                }\n            }\n            catch ( err ) {\n\n                // For example, when clicking on the button to launch speaker console, the button\n                // is immediately deleted from the DOM. In this case target is a DOM element when\n                // we get it, but turns out to be null if you try to actually do anything with it.\n                if ( err instanceof TypeError &&\n                     err.message === \"target is null\" ) {\n                    return;\n                }\n                throw err;\n            }\n        }, false );\n\n        // Add a line to the help popup\n        util.triggerEvent( document, \"impress:help:add\", { command: \"Left &amp; Right\",\n                                                           text: \"Previous &amp; Next step\",\n                                                           row: 1 } );\n\n    }, false );\n\n} )( document );\n\n\n/**\n * Navigation UI plugin\n *\n * This plugin provides UI elements \"back\", \"forward\" and a list to select\n * a specific slide number.\n *\n * The navigation controls are added to the toolbar plugin via DOM events. User must enable the\n * toolbar in a presentation to have them visible.\n *\n * Copyright 2016 Henrik Ingo (@henrikingo)\n * Released under the MIT license.\n */\n\n// This file contains so much HTML, that we will just respectfully disagree about js\n/* jshint quotmark:single */\n/* global document */\n\n( function( document ) {\n    'use strict';\n    var toolbar;\n    var api;\n    var root;\n    var steps;\n    var hideSteps = [];\n    var prev;\n    var select;\n    var next;\n\n    var triggerEvent = function( el, eventName, detail ) {\n        var event = document.createEvent( 'CustomEvent' );\n        event.initCustomEvent( eventName, true, true, detail );\n        el.dispatchEvent( event );\n    };\n\n    var makeDomElement = function( html ) {\n        var tempDiv = document.createElement( 'div' );\n        tempDiv.innerHTML = html;\n        return tempDiv.firstChild;\n    };\n\n    var selectOptionsHtml = function() {\n        var options = '';\n        for ( var i = 0; i < steps.length; i++ ) {\n\n            // Omit steps that are listed as hidden from select widget\n            if ( hideSteps.indexOf( steps[ i ] ) < 0 ) {\n                options = options + '<option value=\"' + steps[ i ].id + '\">' + // jshint ignore:line\n                                    steps[ i ].id + '</option>' + '\\n'; // jshint ignore:line\n            }\n        }\n        return options;\n    };\n\n    var addNavigationControls = function( event ) {\n        api = event.detail.api;\n        var gc = api.lib.gc;\n        root = event.target;\n        steps = root.querySelectorAll( '.step' );\n\n        var prevHtml   = '<button id=\"impress-navigation-ui-prev\" title=\"Previous\" ' +\n                         'class=\"impress-navigation-ui\">&lt;</button>';\n        var selectHtml = '<select id=\"impress-navigation-ui-select\" title=\"Go to\" ' +\n                         'class=\"impress-navigation-ui\">' + '\\n' +\n                           selectOptionsHtml() +\n                           '</select>';\n        var nextHtml   = '<button id=\"impress-navigation-ui-next\" title=\"Next\" ' +\n                         'class=\"impress-navigation-ui\">&gt;</button>';\n\n        prev = makeDomElement( prevHtml );\n        prev.addEventListener( 'click',\n            function() {\n                api.prev();\n        } );\n        select = makeDomElement( selectHtml );\n        select.addEventListener( 'change',\n            function( event ) {\n                api.goto( event.target.value );\n        } );\n        gc.addEventListener( root, 'impress:steprefresh', function( event ) {\n\n            // As impress.js core now allows to dynamically edit the steps, including adding,\n            // removing, and reordering steps, we need to requery and redraw the select list on\n            // every stepenter event.\n            steps = root.querySelectorAll( '.step' );\n            select.innerHTML = '\\n' + selectOptionsHtml();\n\n            // Make sure the list always shows the step we're actually on, even if it wasn't\n            // selected from the list\n            select.value = event.target.id;\n        } );\n        next = makeDomElement( nextHtml );\n        next.addEventListener( 'click',\n            function() {\n                api.next();\n        } );\n\n        triggerEvent( toolbar, 'impress:toolbar:appendChild', { group: 0, element: prev } );\n        triggerEvent( toolbar, 'impress:toolbar:appendChild', { group: 0, element: select } );\n        triggerEvent( toolbar, 'impress:toolbar:appendChild', { group: 0, element: next } );\n\n    };\n\n    // API for not listing given step in the select widget.\n    // For example, if you set class=\"skip\" on some element, you may not want it to show up in the\n    // list either. Otoh we cannot assume that, or anything else, so steps that user wants omitted\n    // must be specifically added with this API call.\n    document.addEventListener( 'impress:navigation-ui:hideStep', function( event ) {\n        hideSteps.push( event.target );\n        if ( select ) {\n            select.innerHTML = selectOptionsHtml();\n        }\n    }, false );\n\n    // Wait for impress.js to be initialized\n    document.addEventListener( 'impress:init', function( event ) {\n        toolbar = document.querySelector( '#impress-toolbar' );\n        if ( toolbar ) {\n            addNavigationControls( event );\n        }\n    }, false );\n\n} )( document );\n\n\n/* global document */\n( function( document ) {\n    \"use strict\";\n    var root;\n    var stepids = [];\n\n    // Get stepids from the steps under impress root\n    var getSteps = function() {\n        stepids = [];\n        var steps = root.querySelectorAll( \".step\" );\n        for ( var i = 0; i < steps.length; i++ )\n        {\n          stepids[ i + 1 ] = steps[ i ].id;\n        }\n        };\n\n    // Wait for impress.js to be initialized\n    document.addEventListener( \"impress:init\", function( event ) {\n            root = event.target;\n        getSteps();\n        var gc = event.detail.api.lib.gc;\n        gc.pushCallback( function() {\n            stepids = [];\n            if ( progressbar ) {\n                progressbar.style.width = \"\";\n                        }\n            if ( progress ) {\n                progress.innerHTML = \"\";\n                        }\n        } );\n    } );\n\n    var progressbar = document.querySelector( \"div.impress-progressbar div\" );\n    var progress = document.querySelector( \"div.impress-progress\" );\n\n    if ( null !== progressbar || null !== progress ) {\n        document.addEventListener( \"impress:stepleave\", function( event ) {\n            updateProgressbar( event.detail.next.id );\n        } );\n\n        document.addEventListener( \"impress:steprefresh\", function( event ) {\n            getSteps();\n            updateProgressbar( event.target.id );\n        } );\n\n    }\n\n    function updateProgressbar( slideId ) {\n        var slideNumber = stepids.indexOf( slideId );\n        if ( null !== progressbar ) {\n                        var width = 100 / ( stepids.length - 1 ) * ( slideNumber );\n            progressbar.style.width = width.toFixed( 2 ) + \"%\";\n        }\n        if ( null !== progress ) {\n            progress.innerHTML = slideNumber + \"/\" + ( stepids.length - 1 );\n        }\n    }\n} )( document );\n\n/**\n * Relative Positioning Plugin\n *\n * This plugin provides support for defining the coordinates of a step relative\n * to the previous step. This is often more convenient when creating presentations,\n * since as you add, remove or move steps, you may not need to edit the positions\n * as much as is the case with the absolute coordinates supported by impress.js\n * core.\n *\n * Example:\n *\n *         <!-- Position step 1000 px to the right and 500 px up from the previous step. -->\n *         <div class=\"step\" data-rel-x=\"1000\" data-rel-y=\"500\">\n *\n * Following html attributes are supported for step elements:\n *\n *     data-rel-x\n *     data-rel-y\n *     data-rel-z\n *\n * These values are also inherited from the previous step. This makes it easy to\n * create a boring presentation where each slide shifts for example 1000px down\n * from the previous.\n *\n * In addition to plain numbers, which are pixel values, it is also possible to\n * define relative positions as a multiple of screen height and width, using\n * a unit of \"h\" and \"w\", respectively, appended to the number.\n *\n * Example:\n *\n *        <div class=\"step\" data-rel-x=\"1.5w\" data-rel-y=\"1.5h\">\n *\n * This plugin is a *pre-init plugin*. It is called synchronously from impress.js\n * core at the beginning of `impress().init()`. This allows it to process its own\n * data attributes first, and possibly alter the data-x, data-y and data-z attributes\n * that will then be processed by `impress().init()`.\n *\n * (Another name for this kind of plugin might be called a *filter plugin*, but\n * *pre-init plugin* is more generic, as a plugin might do whatever it wants in\n * the pre-init stage.)\n *\n * Copyright 2016 Henrik Ingo (@henrikingo)\n * Released under the MIT license.\n */\n\n/* global document, window */\n\n( function( document, window ) {\n    \"use strict\";\n\n    var startingState = {};\n\n    /**\n     * Copied from core impress.js. We currently lack a library mechanism to\n     * to share utility functions like this.\n     */\n    var toNumber = function( numeric, fallback ) {\n        return isNaN( numeric ) ? ( fallback || 0 ) : Number( numeric );\n    };\n\n    /**\n     * Extends toNumber() to correctly compute also relative-to-screen-size values 5w and 5h.\n     *\n     * Returns the computed value in pixels with w/h postfix removed.\n     */\n    var toNumberAdvanced = function( numeric, fallback ) {\n        if ( typeof numeric !== \"string\" ) {\n            return toNumber( numeric, fallback );\n        }\n        var ratio = numeric.match( /^([+-]*[\\d\\.]+)([wh])$/ );\n        if ( ratio == null ) {\n            return toNumber( numeric, fallback );\n        } else {\n            var value = parseFloat( ratio[ 1 ] );\n            var multiplier = ratio[ 2 ] === \"w\" ? window.innerWidth : window.innerHeight;\n            return value * multiplier;\n        }\n    };\n\n    var computeRelativePositions = function( el, prev ) {\n        var data = el.dataset;\n\n        if ( !prev ) {\n\n            // For the first step, inherit these defaults\n            prev = { x:0, y:0, z:0, relative: { x:0, y:0, z:0 } };\n        }\n\n        if ( data.relTo ) {\n\n            var ref = document.getElementById( data.relTo );\n            if ( ref ) {\n\n                // Test, if it is a previous step that already has some assigned position data\n                if ( el.compareDocumentPosition( ref ) & Node.DOCUMENT_POSITION_PRECEDING ) {\n                    prev.x = toNumber( ref.getAttribute( \"data-x\" ) );\n                    prev.y = toNumber( ref.getAttribute( \"data-y\" ) );\n                    prev.z = toNumber( ref.getAttribute( \"data-z\" ) );\n                    prev.relative = {};\n                } else {\n                    window.console.error(\n                        \"impress.js rel plugin: Step \\\"\" + data.relTo + \"\\\" is not defined \" +\n                        \"*before* the current step. Referencing is limited to previously defined \" +\n                        \"steps. Please check your markup. Ignoring data-rel-to attribute of \" +\n                        \"this step. Have a look at the documentation for how to create relative \" +\n                        \"positioning to later shown steps with the help of the goto plugin.\"\n                    );\n                }\n            } else {\n\n                // Step not found\n                window.console.warn(\n                    \"impress.js rel plugin: \\\"\" + data.relTo + \"\\\" is not a valid step in this \" +\n                    \"impress.js presentation. Please check your markup. Ignoring data-rel-to \" +\n                    \"attribute of this step.\"\n                );\n            }\n        }\n\n        var step = {\n                x: toNumber( data.x, prev.x ),\n                y: toNumber( data.y, prev.y ),\n                z: toNumber( data.z, prev.z ),\n                relative: {\n                    x: toNumberAdvanced( data.relX, prev.relative.x ),\n                    y: toNumberAdvanced( data.relY, prev.relative.y ),\n                    z: toNumberAdvanced( data.relZ, prev.relative.z )\n                }\n            };\n\n        // Relative position is ignored/zero if absolute is given.\n        // Note that this also has the effect of resetting any inherited relative values.\n        if ( data.x !== undefined ) {\n            step.relative.x = 0;\n        }\n        if ( data.y !== undefined ) {\n            step.relative.y = 0;\n        }\n        if ( data.z !== undefined ) {\n            step.relative.z = 0;\n        }\n\n        // Apply relative position to absolute position, if non-zero\n        // Note that at this point, the relative values contain a number value of pixels.\n        step.x = step.x + step.relative.x;\n        step.y = step.y + step.relative.y;\n        step.z = step.z + step.relative.z;\n\n        return step;\n    };\n\n    var rel = function( root ) {\n        var steps = root.querySelectorAll( \".step\" );\n        var prev;\n        startingState[ root.id ] = [];\n        for ( var i = 0; i < steps.length; i++ ) {\n            var el = steps[ i ];\n            startingState[ root.id ].push( {\n                el: el,\n                x: el.getAttribute( \"data-x\" ),\n                y: el.getAttribute( \"data-y\" ),\n                z: el.getAttribute( \"data-z\" ),\n                relX: el.getAttribute( \"data-rel-x\" ),\n                relY: el.getAttribute( \"data-rel-y\" ),\n                relZ: el.getAttribute( \"data-rel-z\" )\n            } );\n            var step = computeRelativePositions( el, prev );\n\n            // Apply relative position (if non-zero)\n            el.setAttribute( \"data-x\", step.x );\n            el.setAttribute( \"data-y\", step.y );\n            el.setAttribute( \"data-z\", step.z );\n            prev = step;\n        }\n    };\n\n    // Register the plugin to be called in pre-init phase\n    window.impress.addPreInitPlugin( rel );\n\n    // Register teardown callback to reset the data.x, .y, .z values.\n    document.addEventListener( \"impress:init\", function( event ) {\n        var root = event.target;\n        event.detail.api.lib.gc.pushCallback( function() {\n            var steps = startingState[ root.id ];\n            var step;\n            while ( step = steps.pop() ) {\n\n                // Reset x/y/z in cases where this plugin has changed it.\n                if ( step.relX !== null ) {\n                    if ( step.x === null ) {\n                        step.el.removeAttribute( \"data-x\" );\n                    } else {\n                        step.el.setAttribute( \"data-x\", step.x );\n                    }\n                }\n                if ( step.relY !== null ) {\n                    if ( step.y === null ) {\n                        step.el.removeAttribute( \"data-y\" );\n                    } else {\n                        step.el.setAttribute( \"data-y\", step.y );\n                    }\n                }\n                if ( step.relZ !== null ) {\n                    if ( step.z === null ) {\n                        step.el.removeAttribute( \"data-z\" );\n                    } else {\n                        step.el.setAttribute( \"data-z\", step.z );\n                    }\n                }\n            }\n            delete startingState[ root.id ];\n        } );\n    }, false );\n} )( document, window );\n\n\n/**\n * Resize plugin\n *\n * Rescale the presentation after a window resize.\n *\n * Copyright 2011-2012 Bartek Szopka (@bartaz)\n * Released under the MIT license.\n * ------------------------------------------------\n *  author:  Bartek Szopka\n *  version: 0.5.3\n *  url:     http://bartaz.github.com/impress.js/\n *  source:  http://github.com/bartaz/impress.js/\n *\n */\n\n/* global document, window */\n\n( function( document, window ) {\n    \"use strict\";\n\n    // Wait for impress.js to be initialized\n    document.addEventListener( \"impress:init\", function( event ) {\n        var api = event.detail.api;\n\n        // Rescale presentation when window is resized\n        api.lib.gc.addEventListener( window, \"resize\", api.lib.util.throttle( function() {\n\n            // Force going to active step again, to trigger rescaling\n            api.goto( document.querySelector( \".step.active\" ), 500 );\n        }, 250 ), false );\n    }, false );\n\n} )( document, window );\n\n\n/**\n * Skip Plugin\n *\n * Example:\n *\n *    <!-- This slide is disabled in presentations, when moving with next()\n *         and prev() commands, but you can still move directly to it, for\n *         example with a url (anything using goto()). -->\n *         <div class=\"step skip\">\n *\n * Copyright 2016 Henrik Ingo (@henrikingo)\n * Released under the MIT license.\n */\n\n/* global document, window */\n\n( function( document, window ) {\n    \"use strict\";\n    var util;\n\n    document.addEventListener( \"impress:init\", function( event ) {\n        util = event.detail.api.lib.util;\n    }, false );\n\n    var getNextStep = function( el ) {\n        var steps = document.querySelectorAll( \".step\" );\n        for ( var i = 0; i < steps.length; i++ ) {\n            if ( steps[ i ] === el ) {\n                if ( i + 1 < steps.length ) {\n                    return steps[ i + 1 ];\n                } else {\n                    return steps[ 0 ];\n                }\n            }\n        }\n    };\n    var getPrevStep = function( el ) {\n        var steps = document.querySelectorAll( \".step\" );\n        for ( var i = steps.length - 1; i >= 0; i-- ) {\n            if ( steps[ i ] === el ) {\n                if ( i - 1 >= 0 ) {\n                    return steps[ i - 1 ];\n                } else {\n                    return steps[ steps.length - 1 ];\n                }\n            }\n        }\n    };\n\n    var skip = function( event ) {\n        if ( ( !event ) || ( !event.target ) ) {\n            return;\n        }\n\n        if ( event.detail.next.classList.contains( \"skip\" ) ) {\n            if ( event.detail.reason === \"next\" ) {\n\n                // Go to the next next step instead\n                event.detail.next = getNextStep( event.detail.next );\n\n                // Recursively call this plugin again, until there's a step not to skip\n                skip( event );\n            } else if ( event.detail.reason === \"prev\" ) {\n\n                // Go to the previous previous step instead\n                event.detail.next = getPrevStep( event.detail.next );\n                skip( event );\n            }\n\n            // If the new next element has its own transitionDuration, we're responsible for setting\n            // that on the event as well\n            event.detail.transitionDuration = util.toNumber(\n                event.detail.next.dataset.transitionDuration, event.detail.transitionDuration\n            );\n        }\n    };\n\n    // Register the plugin to be called in pre-stepleave phase\n    // The weight makes this plugin run early. This is a good thing, because this plugin calls\n    // itself recursively.\n    window.impress.addPreStepLeavePlugin( skip, 1 );\n\n} )( document, window );\n\n\n/**\n * Stop Plugin\n *\n * Example:\n *\n *        <!-- Stop at this slide.\n *             (For example, when used on the last slide, this prevents the\n *             presentation from wrapping back to the beginning.) -->\n *        <div class=\"step stop\">\n *\n * Copyright 2016 Henrik Ingo (@henrikingo)\n * Released under the MIT license.\n */\n/* global document, window */\n( function( document, window ) {\n    \"use strict\";\n\n    var stop = function( event ) {\n        if ( ( !event ) || ( !event.target ) ) {\n            return;\n        }\n\n        if ( event.target.classList.contains( \"stop\" ) ) {\n            if ( event.detail.reason === \"next\" ) {\n                return false;\n            }\n        }\n    };\n\n    // Register the plugin to be called in pre-stepleave phase\n    // The weight makes this plugin run fairly early.\n    window.impress.addPreStepLeavePlugin( stop, 2 );\n\n} )( document, window );\n\n\n/**\n * Substep Plugin\n *\n * Copyright 2017 Henrik Ingo (@henrikingo)\n * Released under the MIT license.\n */\n\n/* global document, window */\n\n( function( document, window ) {\n    \"use strict\";\n\n    // Copied from core impress.js. Good candidate for moving to src/lib/util.js.\n    var triggerEvent = function( el, eventName, detail ) {\n        var event = document.createEvent( \"CustomEvent\" );\n        event.initCustomEvent( eventName, true, true, detail );\n        el.dispatchEvent( event );\n    };\n\n    var activeStep = null;\n    document.addEventListener( \"impress:stepenter\", function( event ) {\n        activeStep = event.target;\n    }, false );\n\n    var substep = function( event ) {\n        if ( ( !event ) || ( !event.target ) ) {\n            return;\n        }\n\n        var step = event.target;\n        var el; // Needed by jshint\n        if ( event.detail.reason === \"next\" ) {\n            el = showSubstepIfAny( step );\n            if ( el ) {\n\n                // Send a message to others, that we aborted a stepleave event.\n                triggerEvent( step, \"impress:substep:stepleaveaborted\",\n                              { reason: \"next\", substep: el } );\n\n                // Autoplay uses this for reloading itself\n                triggerEvent( step, \"impress:substep:enter\",\n                              { reason: \"next\", substep: el } );\n\n                // Returning false aborts the stepleave event\n                return false;\n            }\n        }\n        if ( event.detail.reason === \"prev\" ) {\n            el = hideSubstepIfAny( step );\n            if ( el ) {\n                triggerEvent( step, \"impress:substep:stepleaveaborted\",\n                              { reason: \"prev\", substep: el } );\n\n                triggerEvent( step, \"impress:substep:leave\",\n                              { reason: \"prev\", substep: el } );\n\n                return false;\n            }\n        }\n    };\n\n    var showSubstepIfAny = function( step ) {\n        var substeps = step.querySelectorAll( \".substep\" );\n        if ( substeps.length > 0 ) {\n            var sorted = sortSubsteps( substeps );\n            var visible = step.querySelectorAll( \".substep-visible\" );\n            return showSubstep( sorted, visible );\n        }\n    };\n\n    var sortSubsteps = function( substepNodeList ) {\n        var substeps = Array.from( substepNodeList );\n        var sorted = substeps\n            .filter( el => el.dataset.substepOrder )\n            .sort( ( a, b ) => {\n                var orderA = a.dataset.substepOrder;\n                var orderB = b.dataset.substepOrder;\n                return parseInt( orderA ) - parseInt( orderB );\n            } )\n            .concat( substeps.filter( el => {\n                return el.dataset.substepOrder === undefined;\n            } ) );\n        return sorted;\n    };\n\n    var showSubstep = function( substeps, visible ) {\n        if ( visible.length < substeps.length ) {\n            for ( var i = 0; i < substeps.length; i++ ) {\n                substeps[ i ].classList.remove( \"substep-active\" );\n            }\n            var el = substeps[ visible.length ];\n            el.classList.add( \"substep-visible\" );\n            el.classList.add( \"substep-active\" );\n            return el;\n        }\n    };\n\n    var hideSubstepIfAny = function( step ) {\n        var substeps = step.querySelectorAll( \".substep\" );\n        var visible = step.querySelectorAll( \".substep-visible\" );\n        var sorted = sortSubsteps( visible );\n        if ( substeps.length > 0 ) {\n            return hideSubstep( sorted );\n        }\n    };\n\n    var hideSubstep = function( visible ) {\n        if ( visible.length > 0 ) {\n            var current = -1;\n            for ( var i = 0; i < visible.length; i++ ) {\n                if ( visible[ i ].classList.contains( \"substep-active\" ) ) {\n                    current = i;\n                }\n                visible[ i ].classList.remove( \"substep-active\" );\n            }\n            if ( current > 0 ) {\n                visible[ current - 1 ].classList.add( \"substep-active\" );\n            }\n            var el = visible[ visible.length - 1 ];\n            el.classList.remove( \"substep-visible\" );\n            return el;\n        }\n    };\n\n    // Register the plugin to be called in pre-stepleave phase.\n    // The weight makes this plugin run before other preStepLeave plugins.\n    window.impress.addPreStepLeavePlugin( substep, 1 );\n\n    // When entering a step, in particular when re-entering, make sure that all substeps are hidden\n    // at first\n    document.addEventListener( \"impress:stepenter\", function( event ) {\n        var step = event.target;\n        var visible = step.querySelectorAll( \".substep-visible\" );\n        for ( var i = 0; i < visible.length; i++ ) {\n            visible[ i ].classList.remove( \"substep-visible\" );\n        }\n    }, false );\n\n    // API for others to reveal/hide next substep ////////////////////////////////////////////////\n    document.addEventListener( \"impress:substep:show\", function() {\n        showSubstepIfAny( activeStep );\n    }, false );\n\n    document.addEventListener( \"impress:substep:hide\", function() {\n        hideSubstepIfAny( activeStep );\n    }, false );\n\n} )( document, window );\n\n/**\n * Support for swipe and tap on touch devices\n *\n * This plugin implements navigation for plugin devices, via swiping left/right,\n * or tapping on the left/right edges of the screen.\n *\n *\n *\n * Copyright 2015: Andrew Dunai (@and3rson)\n * Modified to a plugin, 2016: Henrik Ingo (@henrikingo)\n *\n * MIT License\n */\n/* global document, window */\n( function( document, window ) {\n    \"use strict\";\n\n    // Touch handler to detect swiping left and right based on window size.\n    // If the difference in X change is bigger than 1/20 of the screen width,\n    // we simply call an appropriate API function to complete the transition.\n    var startX = 0;\n    var lastX = 0;\n    var lastDX = 0;\n    var threshold = window.innerWidth / 20;\n\n    document.addEventListener( \"touchstart\", function( event ) {\n        lastX = startX = event.touches[ 0 ].clientX;\n    } );\n\n    document.addEventListener( \"touchmove\", function( event ) {\n         var x = event.touches[ 0 ].clientX;\n         var diff = x - startX;\n\n         // To be used in touchend\n         lastDX = lastX - x;\n         lastX = x;\n\n         window.impress().swipe( diff / window.innerWidth );\n     } );\n\n     document.addEventListener( \"touchend\", function() {\n         var totalDiff = lastX - startX;\n         if ( Math.abs( totalDiff ) > window.innerWidth / 5 && ( totalDiff * lastDX ) <= 0 ) {\n             if ( totalDiff > window.innerWidth / 5 && lastDX <= 0 ) {\n                 window.impress().prev();\n             } else if ( totalDiff < -window.innerWidth / 5 && lastDX >= 0 ) {\n                 window.impress().next();\n             }\n         } else if ( Math.abs( lastDX ) > threshold ) {\n             if ( lastDX < -threshold ) {\n                 window.impress().prev();\n             } else if ( lastDX > threshold ) {\n                 window.impress().next();\n             }\n         } else {\n\n             // No movement - move (back) to the current slide\n             window.impress().goto( document.querySelector( \"#impress .step.active\" ) );\n         }\n     } );\n\n     document.addEventListener( \"touchcancel\", function() {\n\n             // Move (back) to the current slide\n             window.impress().goto( document.querySelector( \"#impress .step.active\" ) );\n     } );\n\n} )( document, window );\n\n/**\n * Toolbar plugin\n *\n * This plugin provides a generic graphical toolbar. Other plugins that\n * want to expose a button or other widget, can add those to this toolbar.\n *\n * Using a single consolidated toolbar for all GUI widgets makes it easier\n * to position and style the toolbar rather than having to do that for lots\n * of different divs.\n *\n *\n * *** For presentation authors: *****************************************\n *\n * To add/activate the toolbar in your presentation, add this div:\n *\n *     <div id=\"impress-toolbar\"></div>\n *\n * Styling the toolbar is left to presentation author. Here's an example CSS:\n *\n *    .impress-enabled div#impress-toolbar {\n *        position: fixed;\n *        right: 1px;\n *        bottom: 1px;\n *        opacity: 0.6;\n *    }\n *    .impress-enabled div#impress-toolbar > span {\n *        margin-right: 10px;\n *    }\n *\n * The [mouse-timeout](../mouse-timeout/README.md) plugin can be leveraged to hide\n * the toolbar from sight, and only make it visible when mouse is moved.\n *\n *    body.impress-mouse-timeout div#impress-toolbar {\n *        display: none;\n *    }\n *\n *\n * *** For plugin authors **********************************************\n *\n * To add a button to the toolbar, trigger the `impress:toolbar:appendChild`\n * or `impress:toolbar:insertBefore` events as appropriate. The detail object\n * should contain following parameters:\n *\n *    { group : 1,                       // integer. Widgets with the same group are grouped inside\n *                                       // the same <span> element.\n *      html : \"<button>Click</button>\", // The html to add.\n *      callback : \"mycallback\",         // Toolbar plugin will trigger event\n *                                       // `impress:toolbar:added:mycallback` when done.\n *      before: element }                // The reference element for an insertBefore() call.\n *\n * You should also listen to the `impress:toolbar:added:mycallback` event. At\n * this point you can find the new widget in the DOM, and for example add an\n * event listener to it.\n *\n * You are free to use any integer for the group. It's ok to leave gaps. It's\n * ok to co-locate with widgets for another plugin, if you think they belong\n * together.\n *\n * See navigation-ui for an example.\n *\n * Copyright 2016 Henrik Ingo (@henrikingo)\n * Released under the MIT license.\n */\n\n/* global document */\n\n( function( document ) {\n    \"use strict\";\n    var toolbar = document.getElementById( \"impress-toolbar\" );\n    var groups = [];\n\n    /**\n     * Get the span element that is a child of toolbar, identified by index.\n     *\n     * If span element doesn't exist yet, it is created.\n     *\n     * Note: Because of Run-to-completion, this is not a race condition.\n     * https://developer.mozilla.org/en/docs/Web/JavaScript/EventLoop#Run-to-completion\n     *\n     * :param: index   Method will return the element <span id=\"impress-toolbar-group-{index}\">\n     */\n    var getGroupElement = function( index ) {\n        var id = \"impress-toolbar-group-\" + index;\n        if ( !groups[ index ] ) {\n            groups[ index ] = document.createElement( \"span\" );\n            groups[ index ].id = id;\n            var nextIndex = getNextGroupIndex( index );\n            if ( nextIndex === undefined ) {\n                toolbar.appendChild( groups[ index ] );\n            } else {\n                toolbar.insertBefore( groups[ index ], groups[ nextIndex ] );\n            }\n        }\n        return groups[ index ];\n    };\n\n    /**\n     * Get the span element from groups[] that is immediately after given index.\n     *\n     * This can be used to find the reference node for an insertBefore() call.\n     * If no element exists at a larger index, returns undefined. (In this case,\n     * you'd use appendChild() instead.)\n     *\n     * Note that index needn't itself exist in groups[].\n     */\n    var getNextGroupIndex = function( index ) {\n        var i = index + 1;\n        while ( !groups[ i ] && i < groups.length ) {\n            i++;\n        }\n        if ( i < groups.length ) {\n            return i;\n        }\n    };\n\n    // API\n    // Other plugins can add and remove buttons by sending them as events.\n    // In return, toolbar plugin will trigger events when button was added.\n    if ( toolbar ) {\n        /**\n         * Append a widget inside toolbar span element identified by given group index.\n         *\n         * :param: e.detail.group    integer specifying the span element where widget will be placed\n         * :param: e.detail.element  a dom element to add to the toolbar\n         */\n        toolbar.addEventListener( \"impress:toolbar:appendChild\", function( e ) {\n            var group = getGroupElement( e.detail.group );\n            group.appendChild( e.detail.element );\n        } );\n\n        /**\n         * Add a widget to toolbar using insertBefore() DOM method.\n         *\n         * :param: e.detail.before   the reference dom element, before which new element is added\n         * :param: e.detail.element  a dom element to add to the toolbar\n         */\n        toolbar.addEventListener( \"impress:toolbar:insertBefore\", function( e ) {\n            toolbar.insertBefore( e.detail.element, e.detail.before );\n        } );\n\n        /**\n         * Remove the widget in e.detail.remove.\n         */\n        toolbar.addEventListener( \"impress:toolbar:removeWidget\", function( e ) {\n            toolbar.removeChild( e.detail.remove );\n        } );\n\n        document.addEventListener( \"impress:init\", function( event ) {\n            var api = event.detail.api;\n            api.lib.gc.pushCallback( function() {\n                toolbar.innerHTML = \"\";\n                groups = [];\n            } );\n        } );\n    } // If toolbar\n\n} )( document );\n"]}